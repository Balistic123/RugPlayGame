var tt=Object.defineProperty;var W=e=>{throw TypeError(e)};var et=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>et(e,typeof t!="symbol"?t+"":t,r),rt=(e,t,r)=>t.has(e)||W("Cannot "+r);var S=(e,t,r)=>(rt(e,t,"read from private field"),r?r.call(e):t.get(e)),M=(e,t,r)=>t.has(e)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);import{q as D,p as c,c as b,a as v,f as F,r as P,A as st,i as L}from"./BiLdCT7w.js";import{d as y,g as d,e as q,ac as at,l as ot,p as k,i as w,a as C,c as X,j as Y,r as Z,t as B}from"./Dc9Cd6uL.js";import{c as E}from"./DKQvO5e2.js";import{a as O,b as G,c as H}from"./aor5dgAF.js";import{i as J}from"./4JrI1xkN.js";import{a as K,d as it,e as N,f as p,m as Q}from"./DIGQk_Pb.js";import{C as nt,D as lt}from"./BBRRXwej.js";const U=it({component:"avatar",parts:["root","image","fallback"]});var R;class ct{constructor(t){x(this,"opts");x(this,"domContext");M(this,R,y(()=>({id:this.opts.id.current,[U.root]:"","data-status":this.opts.loadingStatus.current,...K(this.opts.ref)})));this.opts=t,this.domContext=new lt(this.opts.ref),this.loadImage=this.loadImage.bind(this)}loadImage(t,r,n){if(this.opts.loadingStatus.current==="loaded")return;let a;const i=new Image;return i.src=t,r!==void 0&&(i.crossOrigin=r),n&&(i.referrerPolicy=n),this.opts.loadingStatus.current="loading",i.onload=()=>{a=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},i.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{this.domContext.clearTimeout(a)}}get props(){return d(S(this,R))}set props(t){q(S(this,R),t)}}R=new WeakMap;var z;class dt{constructor(t,r){x(this,"opts");x(this,"root");M(this,z,y(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[U.image]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current,...K(this.opts.ref)})));this.opts=t,this.root=r,at(()=>{if(!this.opts.src.current){this.root.opts.loadingStatus.current="error";return}this.opts.crossOrigin.current,ot(()=>this.root.loadImage(this.opts.src.current??"",this.opts.crossOrigin.current,this.opts.referrerPolicy.current))})}get props(){return d(S(this,z))}set props(t){q(S(this,z),t)}}z=new WeakMap;var T,j;class ut{constructor(t,r){x(this,"opts");x(this,"root");M(this,T,y(()=>this.root.opts.loadingStatus.current==="loaded"?{display:"none"}:void 0));M(this,j,y(()=>({style:this.style,"data-status":this.root.opts.loadingStatus.current,[U.fallback]:"",...K(this.opts.ref)})));this.opts=t,this.root=r}get style(){return d(S(this,T))}set style(t){q(S(this,T),t)}get props(){return d(S(this,j))}set props(t){q(S(this,j),t)}}T=new WeakMap,j=new WeakMap;const V=new nt("Avatar.Root");function ft(e){return V.set(new ct(e))}function gt(e){return new dt(e,V.get())}function ht(e){return new ut(e,V.get())}var vt=F("<div><!></div>");function mt(e,t){const r=D();k(t,!0);let n=c(t,"delayMs",3,0),a=c(t,"loadingStatus",15,"loading"),i=c(t,"id",19,()=>N(r)),u=c(t,"ref",15,null),f=P(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const g=ft({delayMs:p.with(()=>n()),loadingStatus:p.with(()=>a(),s=>{var o;a()!==s&&(a(s),(o=t.onLoadingStatusChange)==null||o.call(t,s))}),id:p.with(()=>i()),ref:p.with(()=>u(),s=>u(s))}),l=y(()=>Q(f,g.props));var A=b(),I=w(A);{var h=s=>{var o=b(),_=w(o);O(_,()=>t.child,()=>({props:d(l)})),v(s,o)},m=s=>{var o=vt();let _;var $=X(o);O($,()=>t.children??Y),Z(o),B(()=>_=G(o,_,{...d(l)})),v(s,o)};J(I,s=>{t.child?s(h):s(m,!1)})}v(e,A),C()}var pt=F("<img/>");function yt(e,t){const r=D();k(t,!0);let n=c(t,"id",19,()=>N(r)),a=c(t,"ref",15,null),i=c(t,"crossorigin",3,void 0),u=c(t,"referrerpolicy",3,void 0),f=P(t,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const g=gt({src:p.with(()=>t.src),id:p.with(()=>n()),ref:p.with(()=>a(),s=>a(s)),crossOrigin:p.with(()=>i()),referrerPolicy:p.with(()=>u())}),l=y(()=>Q(f,g.props));var A=b(),I=w(A);{var h=s=>{var o=b(),_=w(o);O(_,()=>t.child,()=>({props:d(l)})),v(s,o)},m=s=>{var o=pt();let _;B(()=>_=G(o,_,{...d(l),src:t.src})),st(o),v(s,o)};J(I,s=>{t.child?s(h):s(m,!1)})}v(e,A),C()}var _t=F("<span><!></span>");function St(e,t){const r=D();k(t,!0);let n=c(t,"id",19,()=>N(r)),a=c(t,"ref",15,null),i=P(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const u=ht({id:p.with(()=>n()),ref:p.with(()=>a(),h=>a(h))}),f=y(()=>Q(i,u.props));var g=b(),l=w(g);{var A=h=>{var m=b(),s=w(m);O(s,()=>t.child,()=>({props:d(f)})),v(h,m)},I=h=>{var m=_t();let s;var o=X(m);O(o,()=>t.children??Y),Z(m),B(()=>s=G(m,s,{...d(f)})),v(h,m)};J(l,h=>{t.child?h(A):h(I,!1)})}v(e,g),C()}function Mt(e,t){k(t,!0);let r=c(t,"ref",15,null),n=P(t,["$$slots","$$events","$$legacy","ref","class"]);var a=b(),i=w(a);const u=y(()=>H("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class));E(i,()=>mt,(f,g)=>{g(f,L({"data-slot":"avatar",get class(){return d(u)}},()=>n,{get ref(){return r()},set ref(l){r(l)}}))}),v(e,a),C()}function Ot(e,t){k(t,!0);let r=c(t,"ref",15,null),n=P(t,["$$slots","$$events","$$legacy","ref","class"]);var a=b(),i=w(a);const u=y(()=>H("aspect-square size-full",t.class));E(i,()=>yt,(f,g)=>{g(f,L({"data-slot":"avatar-image",get class(){return d(u)}},()=>n,{get ref(){return r()},set ref(l){r(l)}}))}),v(e,a),C()}function Rt(e,t){k(t,!0);let r=c(t,"ref",15,null),n=P(t,["$$slots","$$events","$$legacy","ref","class"]);var a=b(),i=w(a);const u=y(()=>H("bg-muted flex size-full items-center justify-center rounded-full",t.class));E(i,()=>St,(f,g)=>{g(f,L({"data-slot":"avatar-fallback",get class(){return d(u)}},()=>n,{get ref(){return r()},set ref(l){r(l)}}))}),v(e,a),C()}export{Mt as A,Ot as a,Rt as b};
