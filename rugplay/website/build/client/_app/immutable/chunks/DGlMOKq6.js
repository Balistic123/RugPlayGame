var Ae=t=>{throw TypeError(t)};var le=(t,e,r)=>e.has(t)||Ae("Cannot "+r);var o=(t,e,r)=>(le(t,e,"read from private field"),r?r.call(t):e.get(t)),l=(t,e,r)=>e.has(t)?Ae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),g=(t,e,r,n)=>(le(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),w=(t,e,r)=>(le(t,e,"access private method"),r);import{u as Ie,J as Xe,o as F,c as qe,a as L,f as pe,p,h as $e}from"./BiLdCT7w.js";import{o as et}from"./DBnYf9wq.js";import{t as be,o as ze,q as Pe,Y as tt,aY as rt,F as Be,a9 as nt,aG as ot,aF as it,z as st,S as G,ac as k,h as ct,l as at,b as Q,g as h,e as z,f as ae,d as ue,aZ as Se,p as _e,i as ke,a as ve,s as ut}from"./Dc9Cd6uL.js";import{i as Ce}from"./4JrI1xkN.js";import{s as Ve}from"./aor5dgAF.js";import{c as Me}from"./D0Gox408.js";import"./DIGQk_Pb.js";import{M as lt}from"./D50NRik3.js";function dt(t,e,r=!1,n=!1,c=!1){var s=t,i="";be(()=>{var a=tt;if(i===(i=e()??"")){ze&&Pe();return}if(a.nodes_start!==null&&(rt(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),i!==""){if(ze){Be.data;for(var u=Pe(),d=u;u!==null&&(u.nodeType!==8||u.data!=="");)d=u,u=nt(u);if(u===null)throw ot(),it;Ie(Be,d),s=st(u);return}var m=i+"";r?m=`<svg>${m}</svg>`:n&&(m=`<math>${m}</math>`);var y=Xe(m);if((r||n)&&(y=G(y)),Ie(G(y),y.lastChild),r||n)for(;G(y);)s.before(G(y));else s.before(y)}})}const Oe=typeof window<"u"?window:void 0;function ft(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var P,q,We;let ht=(We=class{constructor(e={}){l(this,P);l(this,q);const{window:r=Oe,document:n=r==null?void 0:r.document}=e;r!==void 0&&(g(this,P,n),g(this,q,Me(c=>{const s=F(r,"focusin",c),i=F(r,"focusout",c);return()=>{s(),i()}})))}get current(){var e;return(e=o(this,q))==null||e.call(this),o(this,P)?ft(o(this,P)):null}},P=new WeakMap,q=new WeakMap,We);new ht;function mt(t,e){switch(t){case"post":ct(e);break;case"pre":k(e);break}}function je(t,e,r,n={}){const{lazy:c=!1}=n;let s=!c,i=Array.isArray(t)?[]:void 0;mt(e,()=>{const a=Array.isArray(t)?t.map(d=>d()):t();if(!s){s=!0,i=a;return}const u=at(()=>r(a,i));return i=a,u})}function Te(t,e,r){je(t,"post",e,r)}function gt(t,e,r){je(t,"pre",e,r)}Te.pre=gt;function yt(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}var E,v,B,x,V,b,te,S,U,X;class De{constructor(e,r,n={}){l(this,S);l(this,E);l(this,v);l(this,B);l(this,x);l(this,V);l(this,b,Q(0));l(this,te,e=>{e.key!==o(this,v)||e.newValue===null||(g(this,E,w(this,S,U).call(this,e.newValue)),z(o(this,b),h(o(this,b))+1))});const{storage:c="local",serializer:s={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:i=!0,window:a=Oe}=n;if(g(this,E,r),g(this,v,e),g(this,B,s),a===void 0)return;const u=yt(c,a);g(this,x,u);const d=u.getItem(e);d!==null?g(this,E,w(this,S,U).call(this,d)):w(this,S,X).call(this,r),i&&c==="local"&&g(this,V,Me(()=>F(a,"storage",o(this,te))))}get current(){var c,s;(c=o(this,V))==null||c.call(this),h(o(this,b));const e=w(this,S,U).call(this,(s=o(this,x))==null?void 0:s.getItem(o(this,v)))??o(this,E),r=new WeakMap,n=i=>{if(i===null||(i==null?void 0:i.constructor.name)==="Date"||typeof i!="object")return i;let a=r.get(i);return a||(a=new Proxy(i,{get:(u,d)=>(h(o(this,b)),n(Reflect.get(u,d))),set:(u,d,m)=>(z(o(this,b),h(o(this,b))+1),Reflect.set(u,d,m),w(this,S,X).call(this,e),!0)}),r.set(i,a)),a};return n(e)}set current(e){w(this,S,X).call(this,e),z(o(this,b),h(o(this,b))+1)}}E=new WeakMap,v=new WeakMap,B=new WeakMap,x=new WeakMap,V=new WeakMap,b=new WeakMap,te=new WeakMap,S=new WeakSet,U=function(e){try{return o(this,B).deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${o(this,v)}"`,r);return}},X=function(e){var r;try{e!=null&&((r=o(this,x))==null||r.setItem(o(this,v),o(this,B).serialize(e)))}catch(n){console.error(`Error when writing value from persisted store "${o(this,v)}" to ${o(this,x)}`,n)}};function Ne(t){return t.filter(e=>e.length>0)}const Ke={getItem:t=>null,setItem:(t,e)=>{}},Z=typeof document<"u";function wt(t){return typeof t=="function"}function pt(t){return t!==null&&typeof t=="object"}const W=Symbol("box"),Ee=Symbol("is-writable");function bt(t){return pt(t)&&W in t}function St(t){return f.isBox(t)&&Ee in t}function f(t){let e=Q(ae(t));return{[W]:!0,[Ee]:!0,get current(){return h(e)},set current(r){z(e,r,!0)}}}function _t(t,e){const r=ue(t);return e?{[W]:!0,[Ee]:!0,get current(){return h(r)},set current(n){e(n)}}:{[W]:!0,get current(){return t()}}}function kt(t){return f.isBox(t)?t:wt(t)?f.with(t):f(t)}function vt(t){return Object.entries(t).reduce((e,[r,n])=>f.isBox(n)?(f.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(c){n.current=c}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function Ct(t){return f.isWritableBox(t)?{[W]:!0,get current(){return t.current}}:t}f.from=kt;f.with=_t;f.flatten=vt;f.readonly=Ct;f.isBox=bt;f.isWritableBox=St;function Mt(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const Tt=Mt(/[A-Z]/,t=>`-${t.toLowerCase()}`);function Et(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${Tt(e)}: ${t[e]};`).join(`
`)}function xt(t={}){return Et(t).replace(`
`," ")}const At={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};xt(At);const It=typeof window<"u"?window:void 0;function zt(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}var N,O;class Pt{constructor(e={}){l(this,N);l(this,O);const{window:r=It,document:n=r==null?void 0:r.document}=e;r!==void 0&&(g(this,N,n),g(this,O,Me(c=>{const s=F(r,"focusin",c),i=F(r,"focusout",c);return()=>{s(),i()}})))}get current(){var e;return(e=o(this,O))==null||e.call(this),o(this,N)?zt(o(this,N)):null}}N=new WeakMap,O=new WeakMap;new Pt;const M=f("mode-watcher-mode"),T=f("mode-watcher-theme"),Bt=["dark","light","system"];function de(t){return typeof t!="string"?!1:Bt.includes(t)}var j,re,D,ne,A,K,fe;class Nt{constructor(){l(this,K);l(this,j,"system");l(this,re,Z?localStorage:Ke);l(this,D,o(this,re).getItem(M.current));l(this,ne,de(o(this,D))?o(this,D):o(this,j));l(this,A,Q(ae(w(this,K,fe).call(this))));Se(()=>Te.pre(()=>M.current,(e,r)=>{const n=h(o(this,A)).current;z(o(this,A),w(this,K,fe).call(this,n),!0),r&&localStorage.removeItem(r)}))}get current(){return h(o(this,A)).current}set current(e){h(o(this,A)).current=e}}j=new WeakMap,re=new WeakMap,D=new WeakMap,ne=new WeakMap,A=new WeakMap,K=new WeakSet,fe=function(e=o(this,ne)){return new De(M.current,e,{serializer:{serialize:r=>r,deserialize:r=>de(r)?r:o(this,j)}})};var oe,J,H,ie;class Rt{constructor(){l(this,oe);l(this,J,!0);l(this,H,Q(ae(o(this,oe))));l(this,ie,typeof window<"u"&&typeof window.matchMedia=="function"?new lt("prefers-color-scheme: light"):{current:!1});Se(()=>{k(()=>{o(this,J)&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}query(){Z&&z(o(this,H),o(this,ie).current?"light":"dark",!0)}tracking(e){g(this,J,e)}get current(){return h(o(this,H))}}oe=new WeakMap,J=new WeakMap,H=new WeakMap,ie=new WeakMap;const he=new Nt,me=new Rt;var se,R,ce,I,Y,ge;class Ft{constructor(){l(this,Y);l(this,se,Z?localStorage:Ke);l(this,R,o(this,se).getItem(T.current));l(this,ce,o(this,R)===null||o(this,R)===void 0?"":o(this,R));l(this,I,Q(ae(w(this,Y,ge).call(this))));Se(()=>Te.pre(()=>T.current,(e,r)=>{const n=h(o(this,I)).current;z(o(this,I),w(this,Y,ge).call(this,n),!0),r&&localStorage.removeItem(r)}))}get current(){return h(o(this,I)).current}set current(e){h(o(this,I)).current=e}}se=new WeakMap,R=new WeakMap,ce=new WeakMap,I=new WeakMap,Y=new WeakSet,ge=function(e=o(this,ce)){return new De(T.current,e,{serializer:{serialize:r=>typeof r!="string"?"":r,deserialize:r=>r}})};const $=new Ft;let Re,Fe,Le=!1;function Je(t){if(typeof document>"u")return;if(!Le){Le=!0,t();return}clearTimeout(Re),clearTimeout(Fe);const e=document.createElement("style"),r=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(r);const n=()=>document.head.appendChild(e),c=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){n(),t(),window.getComputedStyle(e).opacity,c();return}if(typeof window.requestAnimationFrame<"u"){n(),t(),window.requestAnimationFrame(c);return}n(),Re=window.setTimeout(()=>{t(),Fe=window.setTimeout(c,120)},120)}const C=f(void 0),ee=f(!0),ye=f([]),we=f([]);function Lt(){const t=ue(()=>{if(!Z)return;const e=he.current==="system"?me.current:he.current,r=Ne(ye.current),n=Ne(we.current);function c(){const s=document.documentElement,i=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&s.classList.remove(...r),n.length&&s.classList.add(...n),s.style.colorScheme="light",i&&C.current&&i.setAttribute("content",C.current.light)):(n.length&&s.classList.remove(...n),r.length&&s.classList.add(...r),s.style.colorScheme="dark",i&&C.current&&i.setAttribute("content",C.current.dark))}return ee.current?Je(c):c(),e});return{get current(){return h(t)}}}function Wt(){const t=ue(()=>{if($.current,!Z)return;function e(){document.documentElement.setAttribute("data-theme",$.current)}return ee.current?Je(e):e(),$.current});return{get current(){return h(t)}}}const qt=Lt(),Vt=Wt();function Ot(t){he.current=t}function jt(t){$.current=t}function Dt({defaultMode:t="system",themeColors:e,darkClassNames:r=["dark"],lightClassNames:n=[],defaultTheme:c="",modeStorageKey:s="mode-watcher-mode",themeStorageKey:i="mode-watcher-theme"}){const a=document.documentElement,u=localStorage.getItem(s)??t,d=localStorage.getItem(i)??c,m=u==="light"||u==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(m?(r.length&&a.classList.remove(...r.filter(Boolean)),n.length&&a.classList.add(...n.filter(Boolean))):(n.length&&a.classList.remove(...n.filter(Boolean)),r.length&&a.classList.add(...r.filter(Boolean))),a.style.colorScheme=m?"light":"dark",e){const y=document.querySelector('meta[name="theme-color"]');y&&y.setAttribute("content",u==="light"?e.light:e.dark)}d&&(a.setAttribute("data-theme",d),localStorage.setItem(i,d)),localStorage.setItem(s,u)}var Kt=pe('<meta name="theme-color"/>');function Jt(t,e){_e(e,!0);var r=qe(),n=ke(r);{var c=s=>{var i=Kt();be(()=>Ve(i,"content",e.themeColors.dark)),L(s,i)};Ce(n,s=>{e.themeColors&&s(c)})}L(t,r),ve()}var Ht=pe('<meta name="theme-color"/>'),Yt=pe("<!> <!>",1);function Qt(t,e){_e(e,!0);let r=p(e,"trueNonce",3,"");$e(n=>{var c=Yt(),s=ke(c);{var i=u=>{var d=Ht();be(()=>Ve(d,"content",e.themeColors.dark)),L(u,d)};Ce(s,u=>{e.themeColors&&u(i)})}var a=ut(s,2);dt(a,()=>`<script${r()?` nonce=${r()}`:""}>(`+Dt.toString()+")("+JSON.stringify(e.initConfig)+");<\/script>"),L(n,c)}),ve()}function ir(t,e){_e(e,!0);let r=p(e,"track",3,!0),n=p(e,"defaultMode",3,"system"),c=p(e,"disableTransitions",3,!0),s=p(e,"darkClassNames",19,()=>["dark"]),i=p(e,"lightClassNames",19,()=>[]),a=p(e,"defaultTheme",3,""),u=p(e,"nonce",3,""),d=p(e,"themeStorageKey",3,"mode-watcher-theme"),m=p(e,"modeStorageKey",3,"mode-watcher-mode"),y=p(e,"disableHeadScriptInjection",3,!1);M.current=m(),T.current=d(),ye.current=s(),we.current=i(),ee.current=c(),C.current=e.themeColors,k(()=>{ee.current=c()}),k(()=>{C.current=e.themeColors}),k(()=>{ye.current=s()}),k(()=>{we.current=i()}),k(()=>{M.current=m()}),k(()=>{T.current=d()}),k(()=>{qt.current,M.current,T.current,Vt.current}),et(()=>{me.tracking(r()),me.query();const _=localStorage.getItem(M.current);Ot(de(_)?_:n());const Ue=localStorage.getItem(T.current);jt(Ue||a())});const He={defaultMode:n(),themeColors:e.themeColors,darkClassNames:s(),lightClassNames:i(),defaultTheme:a(),modeStorageKey:m(),themeStorageKey:d()},Ye=ue(()=>typeof window>"u"?u():"");var xe=qe(),Qe=ke(xe);{var Ze=_=>{Jt(_,{get themeColors(){return C.current}})},Ge=_=>{Qt(_,{get trueNonce(){return h(Ye)},initConfig:He,get themeColors(){return C.current}})};Ce(Qe,_=>{y()?_(Ze):_(Ge,!1)})}L(t,xe),ve()}export{ir as M,qt as d,Ot as s};
