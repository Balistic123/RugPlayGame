var Ye=Object.defineProperty;var We=s=>{throw TypeError(s)};var Ze=(s,e,t)=>e in s?Ye(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var k=(s,e,t)=>Ze(s,typeof e!="symbol"?e+"":e,t),$e=(s,e,t)=>e.has(s)||We("Cannot "+t);var v=(s,e,t)=>($e(s,e,"read from private field"),t?t.call(s):e.get(s)),H=(s,e,t)=>e.has(s)?We("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);import{o as et,p as c,c as L,a as u,q as qe,i as we,r as Le,f as U,t as tt,s as de}from"./BiLdCT7w.js";import{b as Y,g as o,e as O,d as E,p as he,i as A,j as Te,a as ve,K as ze,c as r,r as n,t as ce,s as d,h as ot,n as Ee}from"./Dc9Cd6uL.js";import{c as se}from"./DKQvO5e2.js";import{a as ue,b as _e,c as st,j as rt,i as Be}from"./aor5dgAF.js";import{i as q}from"./4JrI1xkN.js";import{w as nt,a as Ge,h as Je,i as it,d as at,f as Z,e as Qe,m as Ne}from"./DIGQk_Pb.js";import{F as lt,P as dt,a as ct,g as Ve,c as ut}from"./CbltTT4D.js";import{M as pt}from"./C4rMxlEz.js";import{g as ft,d as ht,i as Ie,e as vt,o as mt,f as gt,n as Ke,P as _t}from"./CZ0yUM0I.js";import{C as wt,D as je}from"./BBRRXwej.js";import{u as xt}from"./CoPQeE2P.js";import{a as Pt,b as bt,A as Ct}from"./CqEP-Wsq.js";import"./BvtTpaCk.js";import{S as F}from"./DZFQxItp.js";import{P as yt}from"./CczVD_-I.js";import{C as Ot}from"./D2mbqurB.js";import{W as He}from"./DP7Et4ci.js";const Xe=at({component:"link-preview",parts:["content","trigger"]});var xe,Pe,be,Ce,ye,Oe;class Dt{constructor(e){k(this,"opts");H(this,xe,Y(!1));H(this,Pe,Y(!1));H(this,be,Y(!1));k(this,"timeout",null);H(this,Ce,Y(null));H(this,ye,Y(!1));H(this,Oe,Y(null));k(this,"isOpening",!1);k(this,"domContext",new je(()=>null));this.opts=e,nt(()=>this.opts.open.current,t=>{if(!t){this.hasSelection=!1;return}if(!this.domContext)return;const p=()=>{this.containsSelection=!1,this.isPointerDownOnContent=!1,ht(1,()=>{var l;((l=this.domContext.getDocument().getSelection())==null?void 0:l.toString())!==""?this.hasSelection=!0:this.hasSelection=!1})},m=et(this.domContext.getDocument(),"pointerup",p);if(!this.contentNode)return;const x=ft(this.contentNode);for(const g of x)g.setAttribute("tabindex","-1");return()=>{m(),this.hasSelection=!1,this.isPointerDownOnContent=!1}})}get hasSelection(){return o(v(this,xe))}set hasSelection(e){O(v(this,xe),e,!0)}get isPointerDownOnContent(){return o(v(this,Pe))}set isPointerDownOnContent(e){O(v(this,Pe),e,!0)}get containsSelection(){return o(v(this,be))}set containsSelection(e){O(v(this,be),e,!0)}get contentNode(){return o(v(this,Ce))}set contentNode(e){O(v(this,Ce),e,!0)}get contentMounted(){return o(v(this,ye))}set contentMounted(e){O(v(this,ye),e,!0)}get triggerNode(){return o(v(this,Oe))}set triggerNode(e){O(v(this,Oe),e,!0)}clearTimeout(){this.timeout&&(this.domContext.clearTimeout(this.timeout),this.timeout=null)}handleOpen(){this.clearTimeout(),!this.opts.open.current&&(this.isOpening=!0,this.timeout=this.domContext.setTimeout(()=>{this.isOpening&&(this.opts.open.current=!0,this.isOpening=!1)},this.opts.openDelay.current))}immediateClose(){this.clearTimeout(),this.isOpening=!1,this.opts.open.current=!1}handleClose(){this.isOpening=!1,this.clearTimeout(),!this.isPointerDownOnContent&&!this.hasSelection&&(this.timeout=this.domContext.setTimeout(()=>{this.opts.open.current=!1},this.opts.closeDelay.current))}}xe=new WeakMap,Pe=new WeakMap,be=new WeakMap,Ce=new WeakMap,ye=new WeakMap,Oe=new WeakMap;var De;class St{constructor(e,t){k(this,"opts");k(this,"root");H(this,De,E(()=>{var e;return{id:this.opts.id.current,"aria-haspopup":"dialog","aria-expanded":it(this.root.opts.open.current),"data-state":Je(this.root.opts.open.current),"aria-controls":(e=this.root.contentNode)==null?void 0:e.id,role:"button",[Xe.trigger]:"",onpointerenter:this.onpointerenter,onfocus:this.onfocus,onblur:this.onblur,onpointerleave:this.onpointerleave,...Ge(this.opts.ref,t=>this.root.triggerNode=t)}}));this.opts=e,this.root=t,this.root.domContext=new je(e.ref),this.onpointerenter=this.onpointerenter.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this)}onpointerenter(e){Ie(e)||this.root.handleOpen()}onpointerleave(e){Ie(e)||this.root.contentMounted||this.root.immediateClose()}onfocus(e){vt(e.currentTarget)&&this.root.handleOpen()}onblur(e){this.root.handleClose()}get props(){return o(v(this,De))}set props(e){O(v(this,De),e)}}De=new WeakMap;var Se,ke;class kt{constructor(e,t){k(this,"opts");k(this,"root");k(this,"onInteractOutside",e=>{this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()});k(this,"onEscapeKeydown",e=>{var t,p;(p=(t=this.opts.onEscapeKeydown).current)==null||p.call(t,e),!e.defaultPrevented&&this.root.handleClose()});k(this,"onOpenAutoFocus",e=>{e.preventDefault()});k(this,"onCloseAutoFocus",e=>{e.preventDefault()});H(this,Se,E(()=>({open:this.root.opts.open.current})));H(this,ke,E(()=>({id:this.opts.id.current,tabindex:-1,"data-state":Je(this.root.opts.open.current),[Xe.content]:"",onpointerdown:this.onpointerdown,onpointerenter:this.onpointerenter,onfocusout:this.onfocusout,...Ge(this.opts.ref,e=>this.root.contentNode=e)})));k(this,"popperProps",{onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus});this.opts=e,this.root=t,this.root.domContext=new je(e.ref),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerenter=this.onpointerenter.bind(this),this.onfocusout=this.onfocusout.bind(this),xt({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.opts.ref.current,enabled:()=>this.root.opts.open.current,onPointerExit:()=>{this.root.handleClose()}}),mt(()=>{this.root.clearTimeout()})}onpointerdown(e){const t=e.target;gt(t)&&(e.currentTarget.contains(t)&&(this.root.containsSelection=!0),this.root.hasSelection=!0,this.root.isPointerDownOnContent=!0)}onpointerenter(e){Ie(e)||this.root.handleOpen()}onfocusout(e){e.preventDefault()}get snippetProps(){return o(v(this,Se))}set snippetProps(e){O(v(this,Se),e)}get props(){return o(v(this,ke))}set props(e){O(v(this,ke),e)}}Se=new WeakMap,ke=new WeakMap;const Re=new wt("LinkPreview.Root");function At(s){return Re.set(new Dt(s))}function Ft(s){return new St(s,Re.get())}function Mt(s){return new kt(s,Re.get())}function Nt(s,e){he(e,!0);let t=c(e,"open",15,!1),p=c(e,"onOpenChange",3,Ke),m=c(e,"openDelay",3,700),x=c(e,"closeDelay",3,300);At({open:Z.with(()=>t(),_=>{t(_),p()(_)}),openDelay:Z.with(()=>m()),closeDelay:Z.with(()=>x())});var g=L(),l=A(g);se(l,()=>lt,(_,I)=>{I(_,{children:(K,re)=>{var j=L(),i=A(j);ue(i,()=>e.children??Te),u(K,j)},$$slots:{default:!0}})}),u(s,g),ve()}var Tt=U("<div><div><!></div></div>"),Lt=U("<div><div><!></div></div>"),Et=U("<!> <!>",1);function It(s,e){const t=qe();he(e,!0);let p=c(e,"id",19,()=>Qe(t)),m=c(e,"ref",15,null),x=c(e,"side",3,"top"),g=c(e,"sideOffset",3,0),l=c(e,"align",3,"center"),_=c(e,"avoidCollisions",3,!0),I=c(e,"arrowPadding",3,0),K=c(e,"sticky",3,"partial"),re=c(e,"hideWhenDetached",3,!1),j=c(e,"collisionPadding",3,0),i=c(e,"onInteractOutside",3,Ke),M=c(e,"onEscapeKeydown",3,Ke),R=c(e,"forceMount",3,!1),W=Le(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const a=Mt({id:Z.with(()=>p()),ref:Z.with(()=>m(),b=>m(b)),onInteractOutside:Z.with(()=>i()),onEscapeKeydown:Z.with(()=>M())}),P=E(()=>({side:x(),sideOffset:g(),align:l(),avoidCollisions:_(),arrowPadding:I(),sticky:K(),hideWhenDetached:re(),collisionPadding:j()})),D=E(()=>Ne(W,o(P),a.props));var S=L(),z=A(S);{var ne=b=>{dt(b,we(()=>o(D),()=>a.popperProps,{get ref(){return a.opts.ref},get enabled(){return a.root.opts.open.current},get id(){return p()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,popper:(G,C)=>{let $=()=>C==null?void 0:C().props,J=()=>C==null?void 0:C().wrapperProps;var y=L();const ee=E(()=>Ne($(),{style:Ve("link-preview")}));var Q=A(y);{var pe=N=>{var T=L(),te=A(T),h=ze(()=>({props:o(ee),wrapperProps:J(),...a.snippetProps}));ue(te,()=>e.child,()=>o(h)),u(N,T)},ae=N=>{var T=Tt();let te;var h=r(T);let f;var w=r(h);ue(w,()=>e.children??Te),n(h),n(T),ce(()=>{te=_e(T,te,{...J()}),f=_e(h,f,{...o(ee)})}),u(N,T)};q(Q,N=>{e.child?N(pe):N(ae,!1)})}u(G,y)},$$slots:{popper:!0}}))},ie=(b,B)=>{{var G=C=>{ct(C,we(()=>o(D),()=>a.popperProps,{get ref(){return a.opts.ref},get present(){return a.root.opts.open.current},get id(){return p()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,popper:(J,y)=>{let ee=()=>y==null?void 0:y().props,Q=()=>y==null?void 0:y().wrapperProps;var pe=Et();const ae=E(()=>Ne(ee(),{style:Ve("link-preview")}));var N=A(pe);{var T=f=>{var w=L(),X=A(w),V=ze(()=>({props:o(ae),wrapperProps:Q(),...a.snippetProps}));ue(X,()=>e.child,()=>o(V)),u(f,w)},te=f=>{var w=Lt();let X;var V=r(w);let oe;var me=r(V);ue(me,()=>e.children??Te),n(V),n(w),ce(()=>{X=_e(w,X,{...Q()}),oe=_e(V,oe,{...o(ae)})}),u(f,w)};q(N,f=>{e.child?f(T):f(te,!1)})}var h=d(N,2);pt(h,{get mounted(){return a.root.contentMounted},set mounted(f){a.root.contentMounted=f}}),u(J,pe)},$$slots:{popper:!0}}))};q(b,C=>{R()||C(G)},B)}};q(z,b=>{R()?b(ne):b(ie,!1)})}u(s,S),ve()}var Kt=U("<a><!></a>");function jt(s,e){const t=qe();he(e,!0);let p=c(e,"ref",15,null),m=c(e,"id",19,()=>Qe(t)),x=Le(e,["$$slots","$$events","$$legacy","ref","id","child","children"]);const g=Ft({id:Z.with(()=>m()),ref:Z.with(()=>p(),K=>p(K))}),l=E(()=>Ne(x,g.props));var _=L(),I=A(_);se(I,()=>ut,(K,re)=>{re(K,{get id(){return m()},get ref(){return g.opts.ref},children:(j,i)=>{var M=L(),R=A(M);{var W=P=>{var D=L(),S=A(D);ue(S,()=>e.child,()=>({props:o(l)})),u(P,D)},a=P=>{var D=Kt();let S;var z=r(D);ue(z,()=>e.children??Te),n(D),ce(()=>S=_e(D,S,{...o(l)})),u(P,D)};q(R,P=>{e.child?P(W):P(a,!1)})}u(j,M)},$$slots:{default:!0}})}),u(s,_),ve()}function uo(s,e){he(e,!0);let t=c(e,"ref",15,null),p=c(e,"align",3,"center"),m=c(e,"sideOffset",3,4),x=Le(e,["$$slots","$$events","$$legacy","ref","class","align","sideOffset","portalProps"]);var g=L(),l=A(g);se(l,()=>_t,(_,I)=>{I(_,we(()=>e.portalProps,{children:(K,re)=>{var j=L(),i=A(j);const M=E(()=>st("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 outline-hidden z-50 mt-3 w-64 rounded-md border p-4 shadow-md outline-none",e.class));se(i,()=>It,(R,W)=>{W(R,we({"data-slot":"hover-card-content",get align(){return p()},get sideOffset(){return m()},get class(){return o(M)}},()=>x,{get ref(){return t()},set ref(a){t(a)}}))}),u(K,j)},$$slots:{default:!0}}))}),u(s,g),ve()}function po(s,e){he(e,!0);let t=c(e,"ref",15,null),p=Le(e,["$$slots","$$events","$$legacy","ref"]);var m=L(),x=A(m);se(x,()=>jt,(g,l)=>{l(g,we({"data-slot":"hover-card-trigger"},()=>p,{get ref(){return t()},set ref(_){t(_)}}))}),u(s,m),ve()}const fo=Nt;var Rt=U('<div class="flex gap-4"><!> <div class="min-w-0 flex-1 space-y-2"><div class="flex items-center space-x-2"><!> <!></div> <!> <!> <!> <!> <!> <div class="space-y-1 pt-2"><div class="flex items-center justify-between"><!> <!></div> <div class="flex items-center justify-between"><!> <!></div></div> <!></div></div>'),Ut=U('<div class="flex items-center justify-center py-8"><span class="text-muted-foreground text-sm">Failed to load profile</span></div>'),Wt=U("<!> <!>",1),zt=U('<p class="text-sm"> </p>'),Bt=U('<div class="space-y-1 pt-2"><div class="flex items-center justify-between"><span class="text-muted-foreground flex items-center gap-1 text-xs"><!> Portfolio</span> <span class="font-mono text-sm font-medium"> </span></div> <div class="flex items-center justify-between"><span class="text-muted-foreground flex items-center gap-1 text-xs"><!> Cash</span> <span class="text-success font-mono text-sm font-medium"> </span></div></div>'),Vt=U('<div class="flex gap-4"><!> <div class="min-w-0 flex-1 space-y-1"><div class="flex min-w-0 items-center gap-2"><h4 class="max-w-[150px] truncate text-sm font-semibold sm:max-w-[200px]"> </h4> <!></div> <p class="text-muted-foreground text-sm"> </p> <!> <!> <div class="flex items-center pt-2"><!> <span class="text-muted-foreground text-xs"> </span></div></div></div>'),Ht=U('<div class="p-4"><!></div>');function ho(s,e){he(e,!0);let t=c(e,"showBio",3,!0),p=Y(null),m=Y(!0),x=Y(!1);async function g(){O(m,!0),O(x,!1);try{const i=await fetch(`/api/user/${e.userId}`);i.ok?O(p,await i.json(),!0):O(x,!0)}catch(i){console.error("Failed to fetch user data:",i),O(x,!0)}finally{O(m,!1)}}ot(()=>{if(e.userId){const i=new AbortController;return g(),()=>{i.abort()}}});let l=E(()=>{var i;return(i=o(p))==null?void 0:i.profile}),_=E(()=>{var i;return(i=o(p))==null?void 0:i.stats});var I=Ht(),K=r(I);{var re=i=>{var M=Rt(),R=r(M);F(R,{class:"size-14 shrink-0 rounded-full"});var W=d(R,2),a=r(W),P=r(a);F(P,{class:"h-5 w-[150px]"});var D=d(P,2);F(D,{class:"h-5 w-[80px]"}),n(a);var S=d(a,2);F(S,{class:"h-4 w-[130px]"});var z=d(S,2);F(z,{class:"h-4 w-[200px]"});var ne=d(z,2);F(ne,{class:"h-4 w-[200px]"});var ie=d(ne,2);F(ie,{class:"h-4 w-[200px]"});var b=d(ie,2);F(b,{class:"h-4 w-[200px]"});var B=d(b,2),G=r(B),C=r(G);F(C,{class:"h-4 w-[80px]"});var $=d(C,2);F($,{class:"h-4 w-[100px]"}),n(G);var J=d(G,2),y=r(J);F(y,{class:"h-4 w-[50px]"});var ee=d(y,2);F(ee,{class:"h-4 w-[90px]"}),n(J),n(B);var Q=d(B,2);F(Q,{class:"h-4 w-[180px]"}),n(W),n(M),u(i,M)},j=(i,M)=>{{var R=a=>{var P=Ut();u(a,P)},W=(a,P)=>{{var D=S=>{var z=Vt(),ne=r(z);se(ne,()=>Ct,(h,f)=>{f(h,{class:"h-14 w-14 shrink-0",children:(w,X)=>{var V=Wt(),oe=A(V);const me=E(()=>rt(o(l).image));se(oe,()=>Pt,(le,ge)=>{ge(le,{get src(){return o(me)},get alt(){return o(l).name}})});var Ae=d(oe,2);se(Ae,()=>bt,(le,ge)=>{ge(le,{class:"text-sm",children:(Fe,Ue)=>{Ee();var Me=tt();ce(fe=>de(Me,fe),[()=>{var fe;return((fe=o(l).name)==null?void 0:fe.charAt(0))||"?"}]),u(Fe,Me)},$$slots:{default:!0}})}),u(w,V)},$$slots:{default:!0}})});var ie=d(ne,2),b=r(ie),B=r(b),G=r(B,!0);n(B);var C=d(B,2);yt(C,{get user(){return o(l)},showId:!0,size:"sm"}),n(b);var $=d(b,2),J=r($);n($);var y=d($,2);{var ee=h=>{var f=zt(),w=r(f,!0);n(f),ce(()=>de(w,o(l).bio)),u(h,f)};q(y,h=>{o(l).bio&&t()&&h(ee)})}var Q=d(y,2);{var pe=h=>{var f=Bt(),w=r(f),X=r(w),V=r(X);He(V,{class:"h-3 w-3"}),Ee(),n(X);var oe=d(X,2),me=r(oe,!0);n(oe),n(w);var Ae=d(w,2),le=r(Ae),ge=r(le);He(ge,{class:"h-3 w-3"}),Ee(),n(le);var Fe=d(le,2),Ue=r(Fe,!0);n(Fe),n(Ae),n(f),ce((Me,fe)=>{de(me,Me),de(Ue,fe)},[()=>Be(o(_).totalPortfolioValue),()=>Be(o(_).baseCurrencyBalance)]),u(h,f)};q(Q,h=>{o(_)&&h(pe)})}var ae=d(Q,2),N=r(ae);Ot(N,{class:"mr-2 h-4 w-4 opacity-70"});var T=d(N,2),te=r(T);n(T),n(ae),n(ie),n(z),ce(h=>{de(G,o(l).name),de(J,`@${o(l).username??""}`),de(te,`Joined ${h??""}`)},[()=>new Date(o(l).createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]),u(S,z)};q(a,S=>{o(l)&&S(D)},P)}};q(i,a=>{o(x)?a(R):a(W,!1)},M)}};q(K,i=>{o(m)?i(re):i(j,!1)})}n(I),u(s,I),ve()}export{po as H,fo as R,ho as U,uo as a};
