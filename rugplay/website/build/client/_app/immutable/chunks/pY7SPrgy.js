import{k as s,w as i}from"./Dc9Cd6uL.js";const n=i([]),e=i(0);async function f(t=!1){try{const o=new URLSearchParams({unread_only:t.toString()}),a=await fetch(`/api/notifications?${o}`);if(!a.ok)throw new Error("Failed to fetch notifications");const r=await a.json();return n.set(r.notifications),e.set(r.unreadCount),r}catch(o){throw console.error("Failed to fetch notifications:",o),o}}async function d(){try{if(!(await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAsRead:!0})})).ok)throw new Error("Failed to mark notifications as read");n.update(o=>o.map(a=>({...a,isRead:!0}))),e.set(0)}catch(t){throw console.error("Failed to mark notifications as read:",t),t}}s(e,t=>t>0);export{n as N,e as U,f,d as m};
