import{p as Ke,f as Z,t as D,a as u,s as be,c as ht,d as bt,j as _t,b as xt,g as ut}from"../chunks/BiLdCT7w.js";import{p as Ze,b as oe,f as Ne,i as _e,n as F,s,c as d,r as i,g as a,d as Se,t as we,a as Ye,e as h,h as pt}from"../chunks/Dc9Cd6uL.js";import{i as Ee}from"../chunks/4JrI1xkN.js";import{o as Qe,a as yt}from"../chunks/DBnYf9wq.js";import{A as Xe,i as Re,t as ct,B as ze,C as Ge,s as vt,D as gt,k as ft,E as Mt}from"../chunks/aor5dgAF.js";import{B as ee}from"../chunks/PVG7Em25.js";import{I as He}from"../chunks/5J9eaWb4.js";import{C as et}from"../chunks/BE8a_9Ge.js";import{C as tt}from"../chunks/D0g6TdLa.js";import{C as at}from"../chunks/CTo_Vl_F.js";import{C as rt}from"../chunks/b_f0gCBc.js";import{C as nt}from"../chunks/jS9pjJ83.js";import{t as ot}from"../chunks/BR_bh9L_.js";import{e as Ue,i as We}from"../chunks/DT6MbhOo.js";import{b as st,P as mt}from"../chunks/DORihvSD.js";import{M as $t}from"../chunks/DGlMOKq6.js";import{U as wt}from"../chunks/CTHXnj9k.js";import{S as St}from"../chunks/BUFrtusw.js";import{S as Pt}from"../chunks/BGGxhLCO.js";var dt={};(function Ae(M,U,Be,ce){var ye=!!(M.Worker&&M.Blob&&M.Promise&&M.OffscreenCanvas&&M.OffscreenCanvasRenderingContext2D&&M.HTMLCanvasElement&&M.HTMLCanvasElement.prototype.transferControlToOffscreen&&M.URL&&M.URL.createObjectURL),W=typeof Path2D=="function"&&typeof DOMMatrix=="function",L=function(){if(!M.OffscreenCanvas)return!1;var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var r=t.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function te(){}function I(t){var e=U.exports.Promise,r=e!==void 0?e:M.Promise;return typeof r=="function"?new r(t):(t(te,te),null)}var de=function(t,e){return{transform:function(r){if(t)return r;if(e.has(r))return e.get(r);var o=new OffscreenCanvas(r.width,r.height),n=o.getContext("2d");return n.drawImage(r,0,0),e.set(r,o),o},clear:function(){e.clear()}}}(L,new Map),ue=function(){var t=Math.floor(16.666666666666668),e,r,o={},n=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var m=Math.random();return o[m]=requestAnimationFrame(function c(b){n===b||n+t-1<b?(n=b,delete o[m],l()):o[m]=requestAnimationFrame(c)}),m},r=function(l){o[l]&&cancelAnimationFrame(o[l])}):(e=function(l){return setTimeout(l,t)},r=function(l){return clearTimeout(l)}),{frame:e,cancel:r}}(),Y=function(){var t,e,r={};function o(n){function l(m,c){n.postMessage({options:m||{},callback:c})}n.init=function(c){var b=c.transferControlToOffscreen();n.postMessage({canvas:b},[b])},n.fire=function(c,b,S){if(e)return l(c,null),e;var P=Math.random().toString(36).slice(2);return e=I(function(E){function K(re){re.data.callback===P&&(delete r[P],n.removeEventListener("message",K),e=null,de.clear(),S(),E())}n.addEventListener("message",K),l(c,P),r[P]=K.bind(null,{data:{callback:P}})}),e},n.reset=function(){n.postMessage({reset:!0});for(var c in r)r[c](),delete r[c]}}return function(){if(t)return t;if(!Be&&ye){var n=["var CONFETTI, SIZE = {}, module = {};","("+Ae.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([n])))}catch(l){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",l),null}o(t)}return t}}(),se={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function je(t,e){return e?e(t):t}function Pe(t){return t!=null}function $(t,e,r){return je(t&&Pe(t[e])?t[e]:se[e],r)}function ae(t){return t<0?0:Math.floor(t)}function le(t,e){return Math.floor(Math.random()*(e-t))+t}function q(t){return parseInt(t,16)}function ve(t){return t.map(O)}function O(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:q(e.substring(0,2)),g:q(e.substring(2,4)),b:q(e.substring(4,6))}}function _(t){var e=$(t,"origin",Object);return e.x=$(e,"x",Number),e.y=$(e,"y",Number),e}function V(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function w(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function J(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function g(t,e,r,o,n,l,m,c,b){t.save(),t.translate(e,r),t.rotate(l),t.scale(o,n),t.arc(0,0,1,m,c,b),t.restore()}function p(t){var e=t.angle*(Math.PI/180),r=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function C(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,o=e.x+e.random*e.tiltCos,n=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,m=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",t.beginPath(),W&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(A(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-o)*.1,Math.abs(m-n)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var c=Math.PI/10*e.wobble,b=Math.abs(l-o)*.1,S=Math.abs(m-n)*.1,P=e.shape.bitmap.width*e.scalar,E=e.shape.bitmap.height*e.scalar,K=new DOMMatrix([Math.cos(c)*b,Math.sin(c)*b,-Math.sin(c)*S,Math.cos(c)*S,e.x,e.y]);K.multiplySelf(new DOMMatrix(e.shape.matrix));var re=t.createPattern(de.transform(e.shape.bitmap),"no-repeat");re.setTransform(K),t.globalAlpha=1-r,t.fillStyle=re,t.fillRect(e.x-P/2,e.y-E/2,P,E),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(m-n)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):g(t,e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(m-n)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var B=Math.PI/2*3,T=4*e.scalar,H=8*e.scalar,N=e.x,fe=e.y,me=5,ie=Math.PI/me;me--;)N=e.x+Math.cos(B)*H,fe=e.y+Math.sin(B)*H,t.lineTo(N,fe),B+=ie,N=e.x+Math.cos(B)*T,fe=e.y+Math.sin(B)*T,t.lineTo(N,fe),B+=ie;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(n)),t.lineTo(Math.floor(l),Math.floor(m)),t.lineTo(Math.floor(o),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function y(t,e,r,o,n){var l=e.slice(),m=t.getContext("2d"),c,b,S=I(function(P){function E(){c=b=null,m.clearRect(0,0,o.width,o.height),de.clear(),n(),P()}function K(){Be&&!(o.width===ce.width&&o.height===ce.height)&&(o.width=t.width=ce.width,o.height=t.height=ce.height),!o.width&&!o.height&&(r(t),o.width=t.width,o.height=t.height),m.clearRect(0,0,o.width,o.height),l=l.filter(function(re){return C(m,re)}),l.length?c=ue.frame(K):E()}c=ue.frame(K),b=E});return{addFettis:function(P){return l=l.concat(P),S},canvas:t,promise:S,reset:function(){c&&ue.cancel(c),b&&b()}}}function j(t,e){var r=!t,o=!!$(e||{},"resize"),n=!1,l=$(e,"disableForReducedMotion",Boolean),m=ye&&!!$(e||{},"useWorker"),c=m?Y():null,b=r?V:w,S=t&&c?!!t.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,E;function K(B,T,H){for(var N=$(B,"particleCount",ae),fe=$(B,"angle",Number),me=$(B,"spread",Number),ie=$(B,"startVelocity",Number),Ce=$(B,"decay",Number),xe=$(B,"gravity",Number),z=$(B,"drift",Number),ne=$(B,"colors",ve),G=$(B,"ticks",Number),pe=$(B,"shapes"),Me=$(B,"scalar"),R=!!$(B,"flat"),X=_(B),k=N,$e=[],Te=t.width*X.x,Fe=t.height*X.y;k--;)$e.push(p({x:Te,y:Fe,angle:fe,spread:me,startVelocity:ie,color:ne[k%ne.length],shape:pe[le(0,pe.length)],ticks:G,decay:Ce,gravity:xe,drift:z,scalar:Me,flat:R}));return E?E.addFettis($e):(E=y(t,$e,b,T,H),E.promise)}function re(B){var T=l||$(B,"disableForReducedMotion",Boolean),H=$(B,"zIndex",Number);if(T&&P)return I(function(ie){ie()});r&&E?t=E.canvas:r&&!t&&(t=J(H),document.body.appendChild(t)),o&&!S&&b(t);var N={width:t.width,height:t.height};c&&!S&&c.init(t),S=!0,c&&(t.__confetti_initialized=!0);function fe(){if(c){var ie={getBoundingClientRect:function(){if(!r)return t.getBoundingClientRect()}};b(ie),c.postMessage({resize:{width:ie.width,height:ie.height}});return}N.width=N.height=null}function me(){E=null,o&&(n=!1,M.removeEventListener("resize",fe)),r&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,S=!1)}return o&&!n&&(n=!0,M.addEventListener("resize",fe,!1)),c?c.fire(B,N,me):K(B,N,me)}return re.reset=function(){c&&c.reset(),E&&E.reset()},re}var x;function Q(){return x||(x=j(null,{useWorker:!0,resize:!0})),x}function A(t,e,r,o,n,l,m){var c=new Path2D(t),b=new Path2D;b.addPath(c,new DOMMatrix(e));var S=new Path2D;return S.addPath(b,new DOMMatrix([Math.cos(m)*n,Math.sin(m)*n,-Math.sin(m)*l,Math.cos(m)*l,r,o])),S}function f(t){if(!W)throw new Error("path confetti are not supported in this browser");var e,r;typeof t=="string"?e=t:(e=t.path,r=t.matrix);var o=new Path2D(e),n=document.createElement("canvas"),l=n.getContext("2d");if(!r){for(var m=1e3,c=m,b=m,S=0,P=0,E,K,re=0;re<m;re+=2)for(var B=0;B<m;B+=2)l.isPointInPath(o,re,B,"nonzero")&&(c=Math.min(c,re),b=Math.min(b,B),S=Math.max(S,re),P=Math.max(P,B));E=S-c,K=P-b;var T=10,H=Math.min(T/E,T/K);r=[H,0,0,H,-Math.round(E/2+c)*H,-Math.round(K/2+b)*H]}return{type:"path",path:e,matrix:r}}function v(t){var e,r=1,o="#000000",n='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,r="scalar"in t?t.scalar:r,n="fontFamily"in t?t.fontFamily:n,o="color"in t?t.color:o);var l=10*r,m=""+l+"px "+n,c=new OffscreenCanvas(l,l),b=c.getContext("2d");b.font=m;var S=b.measureText(e),P=Math.ceil(S.actualBoundingBoxRight+S.actualBoundingBoxLeft),E=Math.ceil(S.actualBoundingBoxAscent+S.actualBoundingBoxDescent),K=2,re=S.actualBoundingBoxLeft+K,B=S.actualBoundingBoxAscent+K;P+=K+K,E+=K+K,c=new OffscreenCanvas(P,E),b=c.getContext("2d"),b.font=m,b.fillStyle=o,b.fillText(e,re,B);var T=1/r;return{type:"bitmap",bitmap:c.transferToImageBitmap(),matrix:[T,0,0,T,-P*T/2,-E*T/2]}}U.exports=function(){return Q().apply(this,arguments)},U.exports.reset=function(){Q().reset()},U.exports.create=j,U.exports.shapeFromPath=f,U.exports.shapeFromText=v})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),dt,!1);const Ve=dt.exports;dt.exports.create;var Tt=Z("<!> <!>",1),Ct=Z('<p class="text-success font-semibold">WIN</p> <p class="text-sm"> </p>',1),Bt=Z('<p class="text-destructive font-semibold">LOSS</p> <p class="text-sm"> </p>',1),jt=Z('<div class="bg-muted/50 w-full rounded-lg p-3"><!></div>'),kt=Z('<div class="text-center"><img src="/facedev/avif/bliptext.avif" alt="Heads" class="mx-auto mb-1 h-8 w-8 object-contain"/> <div>Heads</div></div>'),Et=Z('<div class="text-center"><img src="/facedev/avif/wattesigma.avif" alt="Tails" class="mx-auto mb-1 h-8 w-8 object-contain"/> <div>Tails</div></div>'),It=Z('<div class="grid grid-cols-1 gap-8 md:grid-cols-2"><div class="flex flex-col space-y-4"><div class="text-center"><p class="text-muted-foreground text-sm">Balance</p> <p class="text-2xl font-bold"> </p></div> <div class="flex justify-center"><div class="coin-container svelte-1y4vcqm"><div class="coin svelte-1y4vcqm"><div class="coin-face coin-heads svelte-1y4vcqm"><img src="/facedev/avif/bliptext.avif" alt="Heads" class="h-32 w-32 object-contain"/></div> <div class="coin-face coin-tails svelte-1y4vcqm"><img src="/facedev/avif/wattesigma.avif" alt="Tails" class="h-32 w-32 object-contain"/></div></div></div></div> <div class="flex items-center justify-center text-center"><!></div></div> <div class="space-y-4"><div><div class="mb-2 block text-sm font-medium">Choose Side</div> <div class="flex gap-3"><!> <!></div></div> <div><label for="bet-amount" class="mb-2 block text-sm font-medium">Bet Amount</label> <!> <p class="text-muted-foreground mt-1 text-xs"> </p></div> <div><div class="grid grid-cols-4 gap-2"><!> <!> <!> <!></div></div> <!></div></div>'),At=Z("<!> <!>",1);function Rt(Ae,M){Ze(M,!0);const U=4,Be=.001,ce=1e-7,ye=10,W=11,L=1/(W-1),te=typeof Float32Array=="function";function I(f,v){return 1-3*v+3*f}function de(f,v){return 3*v-6*f}function ue(f){return 3*f}function Y(f,v,t){return((I(v,t)*f+de(v,t))*f+ue(v))*f}function se(f,v,t){return 3*I(v,t)*f*f+2*de(v,t)*f+ue(v)}function je(f,v,t,e,r){let o,n,l=0;do n=v+(t-v)/2,o=Y(n,e,r)-f,o>0?t=n:v=n;while(Math.abs(o)>ce&&++l<ye);return n}function Pe(f,v,t,e){for(let r=0;r<U;++r){const o=se(v,t,e);if(o===0)return v;const n=Y(v,t,e)-f;v-=n/o}return v}function $(f,v,t,e){const r=te?new Float32Array(W):new Array(W);for(let n=0;n<W;++n)r[n]=Y(n*L,f,t);function o(n){let l=0,m=1;const c=W-1;for(;m!==c&&r[m]<=n;++m)l+=L;--m;const b=(n-r[m])/(r[m+1]-r[m]),S=l+b*L,P=se(S,f,t);return P>=Be?Pe(n,S,f,t):P===0?S:je(n,l,l+L,f,t)}return function(l){return l===0||l===1?l:Y(o(l),v,e)}}function ae(f,v,t=1e-4,e=100){if(f<=0)return 0;if(f>=1)return 1;let r=0,o=1,n=.5;for(let l=0;l<e;l++){const c=v(n)-f;if(Math.abs(c)<t)return n;c<0?r=n:o=n,n=(r+o)/2}return n}const le=$(.42,0,.58,1),q=1e6;let ve=Ke(M,"balance",15),O=oe(10),_=oe("10"),V=oe("heads"),w=oe(!1),J=oe(0),g=oe(null),p=oe(Ne([])),C=Se(()=>a(O)>0&&a(O)<=ve()&&a(O)<=q&&!a(w));function y(f){a(w)||h(V,f,!0)}function j(f){const v=Math.min(f,Math.min(ve(),q));v>=0&&(h(O,v,!0),h(_,v.toLocaleString(),!0))}function x(f){const v=f.target,t=v.value.replace(/,/g,""),e=parseFloat(t)||0,r=Math.min(e,Math.min(ve(),q));h(O,r,!0),h(_,v.value,!0)}function Q(){h(_,a(O).toLocaleString(),!0)}async function A(){if(a(C)){h(w,!0),h(g,null),a(p).forEach(clearTimeout),h(p,[],!0);try{const f=await fetch("/api/gambling/coinflip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({side:a(V),amount:a(O)})});if(!f.ok){const l=await f.json();throw new Error(l.error||"Failed to place bet")}const v=await f.json(),t=1800,e=a(J);let r=t;((e+t)%360<180?"heads":"tails")!==v.result&&(r+=180),r===0&&(r=360),h(J,e+r);const n=2e3;if(r>=180){const l=Math.floor(r/180);for(let m=1;m<=l;m++){const c=m*180/r,S=ae(c,le)*n,P=setTimeout(()=>{ze("flip")},S);a(p).push(P)}}setTimeout(()=>{var l;ve(v.newBalance),h(g,v,!0),(l=M.onBalanceUpdate)==null||l.call(M,v.newBalance),v.won&&Ge(Ve),setTimeout(()=>{h(w,!1),v.won||ze("lose")},500)},n)}catch(f){console.error("Coinflip error:",f),ot.error("Bet failed",{description:f instanceof Error?f.message:"Unknown error occurred"}),h(w,!1),a(p).forEach(clearTimeout),h(p,[],!0)}}}Qe(async()=>{var f;Xe.load();try{const v=await st();v&&(ve(v.baseCurrencyBalance),(f=M.onBalanceUpdate)==null||f.call(M,v.baseCurrencyBalance))}catch(v){console.error("Failed to fetch balance:",v)}}),et(Ae,{children:(f,v)=>{var t=At(),e=_e(t);rt(e,{children:(o,n)=>{var l=Tt(),m=_e(l);nt(m,{children:(b,S)=>{F();var P=D("Coinflip");u(b,P)},$$slots:{default:!0}});var c=s(m,2);at(c,{children:(b,S)=>{F();var P=D("Choose heads or tails and double your money!");u(b,P)},$$slots:{default:!0}}),u(o,l)},$$slots:{default:!0}});var r=s(e,2);tt(r,{children:(o,n)=>{var l=It(),m=d(l),c=d(m),b=s(d(c),2),S=d(b,!0);i(b),i(c);var P=s(c,2),E=d(P),K=d(E);i(E),i(P);var re=s(P,2),B=d(re);{var T=ge=>{var ke=jt(),he=d(ke);{var Je=Oe=>{var De=Ct(),Ie=s(_e(De),2),Le=d(Ie);i(Ie),we(it=>be(Le,`Won ${it??""} on ${a(g).result??""}`),[()=>Re(a(g).payout)]),u(Oe,De)},lt=Oe=>{var De=Bt(),Ie=s(_e(De),2),Le=d(Ie);i(Ie),we(it=>be(Le,`Lost ${it??""} on ${a(g).result??""}`),[()=>Re(a(g).amountWagered)]),u(Oe,De)};Ee(he,Oe=>{a(g).won?Oe(Je):Oe(lt,!1)})}i(ke),u(ge,ke)};Ee(B,ge=>{a(g)&&!a(w)&&ge(T)})}i(re),i(m);var H=s(m,2),N=d(H),fe=s(d(N),2),me=d(fe);const ie=Se(()=>a(V)==="heads"?"default":"outline");ee(me,{get variant(){return a(ie)},onclick:()=>y("heads"),get disabled(){return a(w)},class:"side-button h-16 flex-1",children:(ge,ke)=>{var he=kt();u(ge,he)},$$slots:{default:!0}});var Ce=s(me,2);const xe=Se(()=>a(V)==="tails"?"default":"outline");ee(Ce,{get variant(){return a(xe)},onclick:()=>y("tails"),get disabled(){return a(w)},class:"side-button h-16 flex-1",children:(ge,ke)=>{var he=Et();u(ge,he)},$$slots:{default:!0}}),i(fe),i(N);var z=s(N,2),ne=s(d(z),2);He(ne,{id:"bet-amount",type:"text",get value(){return a(_)},oninput:x,onblur:Q,get disabled(){return a(w)},placeholder:"Enter bet amount"});var G=s(ne,2),pe=d(G);i(G),i(z);var Me=s(z,2),R=d(Me),X=d(R);ee(X,{size:"sm",variant:"outline",onclick:()=>j(Math.floor(Math.min(ve()||0,q)*.25)),get disabled(){return a(w)},children:(ge,ke)=>{F();var he=D("25%");u(ge,he)},$$slots:{default:!0}});var k=s(X,2);ee(k,{size:"sm",variant:"outline",onclick:()=>j(Math.floor(Math.min(ve()||0,q)*.5)),get disabled(){return a(w)},children:(ge,ke)=>{F();var he=D("50%");u(ge,he)},$$slots:{default:!0}});var $e=s(k,2);ee($e,{size:"sm",variant:"outline",onclick:()=>j(Math.floor(Math.min(ve()||0,q)*.75)),get disabled(){return a(w)},children:(ge,ke)=>{F();var he=D("75%");u(ge,he)},$$slots:{default:!0}});var Te=s($e,2);ee(Te,{size:"sm",variant:"outline",onclick:()=>j(Math.floor(Math.min(ve()||0,q))),get disabled(){return a(w)},children:(ge,ke)=>{F();var he=D("Max");u(ge,he)},$$slots:{default:!0}}),i(R),i(Me);var Fe=s(Me,2);const qe=Se(()=>!a(C));ee(Fe,{class:"h-12 w-full text-lg",onclick:A,get disabled(){return a(qe)},children:(ge,ke)=>{F();var he=D();we(()=>be(he,a(w)?"Flipping...":"Flip")),u(ge,he)},$$slots:{default:!0}}),i(H),i(l),we((ge,ke)=>{be(S,ge),ct(K,`transform: rotateY(${a(J)??""}deg)`),be(pe,`Max bet: ${ke??""}`)},[()=>Re(ve()),()=>q.toLocaleString()]),u(o,l)},$$slots:{default:!0}}),u(f,t)},$$slots:{default:!0}}),Ye()}var Ft=Z("<!> <!>",1),Ot=Z('<div class="symbol svelte-afv2hi"><img class="symbol-image svelte-afv2hi"/></div>'),Nt=Z('<div class="reel svelte-afv2hi"><div class="reel-strip svelte-afv2hi"></div></div>'),zt=Z('<p class="text-success font-semibold"> </p> <p class="text-sm"> </p>',1),Dt=Z('<p class="text-destructive font-semibold">NO MATCH</p> <p class="text-sm"> </p>',1),Lt=Z('<div class="bg-muted/50 w-full rounded-lg p-3"><!></div>'),Ut=Z('<div class="grid grid-cols-1 gap-8 md:grid-cols-2"><div class="flex flex-col space-y-4"><div class="text-center"><p class="text-muted-foreground text-sm">Balance</p> <p class="text-2xl font-bold"> </p></div> <div class="slots-machine svelte-afv2hi"><div class="slots-container svelte-afv2hi"></div> <div class="payline svelte-afv2hi"></div></div> <div class="flex items-center justify-center text-center"><!></div></div> <div class="space-y-4"><div><div class="mb-2 block text-sm font-medium">Paytable</div> <div class="bg-muted/50 space-y-1 rounded-lg p-3 text-xs"><div class="flex justify-between"><span>3 Same Symbols:</span> <span class="text-success">5x</span></div> <div class="flex justify-between"><span>2 Same Symbols:</span> <span class="text-success">2x</span></div></div></div> <div><label for="bet-amount" class="mb-2 block text-sm font-medium">Bet Amount</label> <!> <p class="text-muted-foreground mt-1 text-xs"> </p></div> <div><div class="grid grid-cols-4 gap-2"><!> <!> <!> <!></div></div> <!></div></div>'),Wt=Z("<!> <!>",1);function Vt(Ae,M){Ze(M,!0);let U=Ke(M,"balance",15);const Be=["bliptext","bussin","griddycode","lyntr","subterfuge","twoblade","wattesigma","webx"],ce=[8,10,12],ye=Math.max(...ce)+3,W=1e6;let L=oe(10),te=oe("10"),I=oe(!1);const de=()=>{const O=[];for(let _=0;_<5;_++){const V=[...Be].sort(()=>Math.random()-.5);O.push(...V)}return O};let ue=Ne([de(),de(),de()]),Y=oe(Ne([0,0,0])),se=oe(null),je=oe(Ne(ue.map(O=>O[1]))),Pe=Se(()=>a(L)>0&&a(L)<=U()&&a(L)<=W&&!a(I));function $(O){const _=Math.min(O,Math.min(U(),W));_>=0&&(h(L,_,!0),h(te,_.toLocaleString(),!0))}function ae(O){const _=O.target,V=_.value.replace(/,/g,""),w=parseFloat(V)||0,J=Math.min(w,Math.min(U(),W));h(L,J,!0),h(te,_.value,!0)}function le(){h(te,a(L).toLocaleString(),!0)}async function q(){if(!a(Pe))return;h(I,!0),h(se,null),ze("background");const O=[Math.random()*60-30,Math.random()*60-30,Math.random()*60-30];h(Y,a(Y).map((_,V)=>_+O[V]),!0);try{const _=await fetch("/api/gambling/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:a(L)})});if(!_.ok){const p=await _.json();throw new Error(p.error||"Failed to place bet")}const V=await _.json(),w=V.symbols.map((p,C)=>{const y=ue[C].map((j,x)=>j===p?x:-1).filter(j=>j!==-1);return y[Math.floor(Math.random()*y.length)]}),J=[2e3,2500,3e3];w.forEach((p,C)=>{const j=60-p*60,x=ue[C].length*60,Q=ce[C]*x;a(Y)[C]=j-Q,setTimeout(()=>{ze("click")},J[C])});const g=Math.max(...J);setTimeout(()=>{var p;U(V.newBalance),h(se,V,!0),(p=M.onBalanceUpdate)==null||p.call(M,V.newBalance),V.won?V.winType==="3 OF A KIND"?(gt(Ve),Ge(Ve)):Ge(Ve):ze("lose"),h(I,!1),h(Y,a(Y).map((C,y)=>{const Q=ue[y].length*60,A=C%Q;return A>0?A-Q:A}),!0)},g+200)}catch(_){console.error("Slots error:",_),ot.error("Bet failed",{description:_ instanceof Error?_.message:"Unknown error occurred"}),h(I,!1)}}function ve(O,_){let w=Math.round(1-O/60);return w=(w%_+_)%_,w}pt(()=>{if(!a(I)){const O=ue.map((_,V)=>{const w=ve(a(Y)[V],_.length);return _[w]});a(se)||h(je,O,!0)}}),Qe(async()=>{var O;Xe.load();try{const _=await st();_&&(U(_.baseCurrencyBalance),(O=M.onBalanceUpdate)==null||O.call(M,_.baseCurrencyBalance))}catch(_){console.error("Failed to fetch balance:",_)}}),et(Ae,{children:(O,_)=>{var V=Wt(),w=_e(V);rt(w,{children:(g,p)=>{var C=Ft(),y=_e(C);nt(y,{children:(x,Q)=>{F();var A=D("Slots");u(x,A)},$$slots:{default:!0}});var j=s(y,2);at(j,{children:(x,Q)=>{F();var A=D("Match 3 symbols to win big!");u(x,A)},$$slots:{default:!0}}),u(g,C)},$$slots:{default:!0}});var J=s(w,2);tt(J,{children:(g,p)=>{var C=Ut(),y=d(C),j=d(y),x=s(d(j),2),Q=d(x,!0);i(x),i(j);var A=s(j,2),f=d(A);Ue(f,21,()=>ue,We,(T,H,N)=>{var fe=Nt(),me=d(fe);Ue(me,21,()=>Array(ye),We,(ie,Ce)=>{var xe=ht(),z=_e(xe);Ue(z,17,()=>a(H),We,(ne,G)=>{var pe=Ot(),Me=d(pe);i(pe),we(()=>{vt(Me,"src",`/facedev/avif/${a(G)??""}.avif`),vt(Me,"alt",a(G))}),u(ne,pe)}),u(ie,xe)}),i(me),i(fe),we(()=>ct(me,`transform: translateY(${a(Y)[N]??""}px); transition: ${a(I)?`transform ${2+N*.5}s cubic-bezier(0.17, 0.67, 0.16, 0.99)`:"none"};`)),u(T,fe)}),i(f),F(2),i(A);var v=s(A,2),t=d(v);{var e=T=>{var H=Lt(),N=d(H);{var fe=ie=>{var Ce=zt(),xe=_e(Ce),z=d(xe);i(xe);var ne=s(xe,2),G=d(ne);i(ne),we(pe=>{be(z,`WIN - ${a(se).winType??""}`),be(G,`Won ${pe??""}`)},[()=>Re(a(se).payout)]),u(ie,Ce)},me=ie=>{var Ce=Dt(),xe=s(_e(Ce),2),z=d(xe);i(xe),we(ne=>be(z,`Lost ${ne??""}`),[()=>Re(a(se).amountWagered)]),u(ie,Ce)};Ee(N,ie=>{a(se).won?ie(fe):ie(me,!1)})}i(H),u(T,H)};Ee(t,T=>{a(se)&&!a(I)&&T(e)})}i(v),i(y);var r=s(y,2),o=s(d(r),2),n=s(d(o),2);He(n,{id:"bet-amount",type:"text",get value(){return a(te)},oninput:ae,onblur:le,get disabled(){return a(I)},placeholder:"Enter bet amount"});var l=s(n,2),m=d(l);i(l),i(o);var c=s(o,2),b=d(c),S=d(b);ee(S,{size:"sm",variant:"outline",onclick:()=>$(Math.floor(Math.min(U(),W)*.25)),get disabled(){return a(I)},children:(T,H)=>{F();var N=D("25%");u(T,N)},$$slots:{default:!0}});var P=s(S,2);ee(P,{size:"sm",variant:"outline",onclick:()=>$(Math.floor(Math.min(U(),W)*.5)),get disabled(){return a(I)},children:(T,H)=>{F();var N=D("50%");u(T,N)},$$slots:{default:!0}});var E=s(P,2);ee(E,{size:"sm",variant:"outline",onclick:()=>$(Math.floor(Math.min(U(),W)*.75)),get disabled(){return a(I)},children:(T,H)=>{F();var N=D("75%");u(T,N)},$$slots:{default:!0}});var K=s(E,2);ee(K,{size:"sm",variant:"outline",onclick:()=>$(Math.floor(Math.min(U(),W))),get disabled(){return a(I)},children:(T,H)=>{F();var N=D("Max");u(T,N)},$$slots:{default:!0}}),i(b),i(c);var re=s(c,2);const B=Se(()=>!a(Pe));ee(re,{class:"h-12 w-full text-lg",onclick:q,get disabled(){return a(B)},children:(T,H)=>{F();var N=D();we(()=>be(N,a(I)?"Spinning...":"Spin")),u(T,N)},$$slots:{default:!0}}),i(r),i(C),we((T,H)=>{be(Q,T),be(m,`Max bet: ${H??""}`)},[()=>Re(U()),()=>W.toLocaleString()]),u(g,C)},$$slots:{default:!0}}),u(O,V)},$$slots:{default:!0}}),Ye()}var Ht=Z("<!> <!>",1),Zt=Z('<img src="/facedev/avif/bussin.avif" alt="Mine" class="h-8 w-8 object-contain svelte-1j4jaet"/>'),Yt=Z('<img src="/facedev/avif/twoblade.avif" alt="Safe" class="h-8 w-8 object-contain svelte-1j4jaet"/>'),qt=Z('<!> <button aria-label="Tile"><!></button>',1),Jt=Z('<div class="grid grid-cols-1 gap-8 md:grid-cols-2 svelte-1j4jaet"><div class="flex flex-col space-y-4 svelte-1j4jaet"><div class="text-center svelte-1j4jaet"><p class="text-muted-foreground text-sm svelte-1j4jaet">Balance</p> <p class="text-2xl font-bold svelte-1j4jaet"> </p></div> <div></div></div> <div class="space-y-4 svelte-1j4jaet"><div class="svelte-1j4jaet"><label for="mine-count" class="mb-2 block text-sm font-medium svelte-1j4jaet">Number of Mines</label> <div class="flex items-center gap-2 svelte-1j4jaet"><!> <!> <!></div> <p class="text-muted-foreground mt-1 text-xs svelte-1j4jaet">You will get <span class="text-success font-semibold svelte-1j4jaet"> </span> per tile, probability of winning: <span class="text-success font-semibold svelte-1j4jaet"> </span></p> <span class="text-muted-foreground text-xs svelte-1j4jaet">Note: Maximum payout per game is capped at $2,000,000.</span></div> <div class="svelte-1j4jaet"><label for="bet-amount" class="mb-2 block text-sm font-medium svelte-1j4jaet">Bet Amount</label> <!> <p class="text-muted-foreground mt-1 text-xs svelte-1j4jaet"> </p></div> <div class="svelte-1j4jaet"><div class="grid grid-cols-4 gap-2 svelte-1j4jaet"><!> <!> <!> <!></div></div> <div class="flex flex-col gap-2 svelte-1j4jaet"><!></div></div></div>'),Gt=Z("<!> <!>",1);function Kt(Ae,M){Ze(M,!0);const U=5,Be=U*U,ce=1e6,ye=3;let W=Ke(M,"balance",15),L=oe(10),te=oe("10"),I=oe(3),de=!1,ue=Ne([]),Y=Ne([]),se=oe(0),je=oe(0),Pe=Ne([]),$=Se(()=>a(L)>0&&a(L)<=W()&&a(L)<=ce&&!0);function ae(w,J){let g=1;for(let p=0;p<w;p++)g*=(Be-J-p)/(Be-p);return(g*100).toFixed(2)}function le(w){const J=Math.min(w,Math.min(W(),ce));J>=0&&(h(L,J,!0),h(te,J.toLocaleString(),!0))}function q(w){const J=w.target.value.replace(/,/g,""),g=parseFloat(J)||0,p=Math.min(g,Math.min(W(),ce));h(L,p,!0),h(te,J,!0)}function ve(){h(te,a(L).toLocaleString(),!0)}function O(){h(se,0),h(je,0)}async function _(w){}async function V(){a($)&&ot.error("Mines game temporarily disabled",{description:"This feature is currently under maintenance"})}Qe(async()=>{var w;Xe.load();try{const J=await st();J&&(W(J.baseCurrencyBalance),(w=M.onBalanceUpdate)==null||w.call(M,J.baseCurrencyBalance))}catch(J){console.error("Failed to fetch balance:",J)}}),yt(O),et(Ae,{children:(w,J)=>{var g=Gt(),p=_e(g);rt(p,{children:(y,j)=>{var x=Ht(),Q=_e(x);nt(Q,{children:(f,v)=>{F();var t=D("Mines");u(f,t)},$$slots:{default:!0}});var A=s(Q,2);at(A,{children:(f,v)=>{F();var t=D("Navigate through the minefield and cash out before hitting a mine!");u(f,t)},$$slots:{default:!0}}),u(y,x)},$$slots:{default:!0}});var C=s(p,2);tt(C,{children:(y,j)=>{var x=Jt(),Q=d(x),A=d(Q),f=s(d(A),2),v=d(f,!0);i(f),i(A);var t=s(A,2);let e;Ue(t,21,()=>Array(Be),We,(R,X,k)=>{var $e=qt(),Te=_e($e);$t(Te,{});var Fe=s(Te,2);let qe;Fe.__click=()=>_();var ge=d(Fe);{var ke=he=>{var Je=ht(),lt=_e(Je);{var Oe=Ie=>{var Le=Zt();u(Ie,Le)},De=Ie=>{var Le=Yt();u(Ie,Le)};Ee(lt,Ie=>{Y.includes(k)?Ie(Oe):Ie(De,!1)})}u(he,Je)};Ee(ge,he=>{ue.includes(k)&&he(ke)})}i(Fe),we(he=>{qe=ft(Fe,1,"mine-tile svelte-1j4jaet",null,qe,he),Fe.disabled=!0},[()=>({revealed:ue.includes(k),mine:ue.includes(k)&&Y.includes(k)&&!Pe.includes(k),safe:ue.includes(k)&&!Y.includes(k)&&Pe.includes(k),light:document.documentElement.classList.contains("light")})]),u(R,$e)}),i(t),i(Q);var r=s(Q,2),o=d(r),n=s(d(o),2),l=d(n);const m=Se(()=>a(I)<=ye);ee(l,{variant:"secondary",size:"sm",onclick:()=>h(I,Math.max(a(I)-1,ye),!0),get disabled(){return a(m)},"aria-label":"Decrease mines",children:(R,X)=>{F();var k=D("-");u(R,k)},$$slots:{default:!0}});var c=s(l,2);He(c,{id:"mine-count",type:"number",min:ye,max:24,get value(){return a(I)},oninput:R=>{const X=R.target,k=Math.max(ye,Math.min(24,parseInt((X==null?void 0:X.value)??"")||ye));h(I,k,!0)},get disabled(){return de},class:"w-12 text-center [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"});var b=s(c,2);const S=Se(()=>a(I)>=24);ee(b,{variant:"secondary",size:"sm",onclick:()=>h(I,Math.min(a(I)+1,24),!0),get disabled(){return a(S)},"aria-label":"Increase mines",children:(R,X)=>{F();var k=D("+");u(R,k)},$$slots:{default:!0}}),i(n);var P=s(n,2),E=s(d(P)),K=d(E);i(E);var re=s(E,2),B=d(re);i(re),i(P),F(2),i(o);var T=s(o,2),H=s(d(T),2);He(H,{id:"bet-amount",type:"text",get value(){return a(te)},oninput:q,onblur:ve,get disabled(){return de},placeholder:"Enter bet amount"});var N=s(H,2),fe=d(N);i(N),i(T);var me=s(T,2),ie=d(me),Ce=d(ie);ee(Ce,{size:"sm",variant:"outline",onclick:()=>le(Math.floor(Math.min(W(),ce)*.25)),get disabled(){return de},children:(R,X)=>{F();var k=D("25%");u(R,k)},$$slots:{default:!0}});var xe=s(Ce,2);ee(xe,{size:"sm",variant:"outline",onclick:()=>le(Math.floor(Math.min(W(),ce)*.5)),get disabled(){return de},children:(R,X)=>{F();var k=D("50%");u(R,k)},$$slots:{default:!0}});var z=s(xe,2);ee(z,{size:"sm",variant:"outline",onclick:()=>le(Math.floor(Math.min(W(),ce)*.75)),get disabled(){return de},children:(R,X)=>{F();var k=D("75%");u(R,k)},$$slots:{default:!0}});var ne=s(z,2);ee(ne,{size:"sm",variant:"outline",onclick:()=>le(Math.floor(Math.min(W(),ce))),get disabled(){return de},children:(R,X)=>{F();var k=D("Max");u(R,k)},$$slots:{default:!0}}),i(ie),i(me);var G=s(me,2),pe=d(G);{var Me=R=>{const X=Se(()=>!a($));ee(R,{class:"h-12 flex-1 text-lg",onclick:V,get disabled(){return a(X)},children:(k,$e)=>{F();var Te=D("Start Game");u(k,Te)},$$slots:{default:!0}})};Ee(pe,R=>{R(Me)})}i(G),i(r),i(x),we((R,X,k,$e,Te)=>{be(v,R),e=ft(t,1,"mines-grid svelte-1j4jaet",null,e,X),be(K,`${k??""}x`),be(B,`${$e??""}%`),be(fe,`Max bet: ${Te??""}`)},[()=>Re(W()),()=>({"pulse-warning":de}),()=>Mt(1,a(I),a(L)).toFixed(2),()=>ae(1,a(I)),()=>ce.toLocaleString()]),u(y,x)},$$slots:{default:!0}}),u(w,g)},$$slots:{default:!0}}),Ye()}bt(["click"]);var Qt=Z("<!> <!>",1),Xt=Z('<div class="dot svelte-9br7ca"></div>'),ea=Z('<div class="face svelte-9br7ca"><div class="dot-container svelte-9br7ca"></div></div>'),ta=Z('<p class="text-success font-semibold">WIN</p> <p class="text-sm"> </p>',1),aa=Z('<p class="text-destructive font-semibold">LOSS</p> <p class="text-sm"> </p>',1),ra=Z('<div class="bg-muted/50 w-full rounded-lg p-3"><!></div>'),na=Z('<div class="grid grid-cols-1 gap-8 md:grid-cols-2"><div class="flex flex-col space-y-4"><div class="text-center"><p class="text-muted-foreground text-sm">Balance</p> <p class="text-2xl font-bold"> </p></div> <div class="flex-1 flex items-center justify-center"><div class="dice-container svelte-9br7ca"><div class="dice svelte-9br7ca"></div></div></div> <div class="flex items-center justify-center text-center"><!></div></div> <div class="space-y-4"><div><div class="mb-2 block text-sm font-medium">Choose Number</div> <div class="grid grid-cols-3 gap-2"></div></div> <div><label for="bet-amount" class="mb-2 block text-sm font-medium">Bet Amount</label> <!> <p class="text-muted-foreground mt-1 text-xs"> </p></div> <div><div class="grid grid-cols-4 gap-2"><!> <!> <!> <!></div></div> <!></div></div>'),oa=Z("<!> <!>",1);function sa(Ae,M){Ze(M,!0);const U=1e6,Be="rotate3d(1, 1, 0, 340deg)",ce={1:{x:0,y:0},2:{x:0,y:90},3:{x:90,y:0},4:{x:-90,y:0},5:{x:0,y:-90},6:{x:0,y:180}},ye={1:{x:0,y:0,z:0},2:{x:0,y:-90,z:0},3:{x:-90,y:0,z:0},4:{x:90,y:0,z:0},5:{x:0,y:90,z:0},6:{x:0,y:180,z:0}};function W(g=4){const p=g*360,C=g*360,y=g*360;return{x:p,y:C,z:y}}function L(g){return ce[g]}function te(g){const p=L(g);return`${ue(p.x,p.y)} translateZ(50px)`}function I(g,p=!1,C=4){let y={x:0,y:0,z:0};p&&(y=W(C));const j=ye[g];return{x:j.x+y.x,y:j.y+y.y,z:j.z+y.z}}function de(g,p=!1,C=4){const y=I(g,p,C);return`${Be} ${ue(y.x,y.y,y.z)}`}function ue(g,p,C){const y=g!==void 0?`rotateX(${g}deg)`:"",j=p!==void 0?`rotateY(${p}deg)`:"",x=C!==void 0?`rotateZ(${C}deg)`:"";return`${y} ${j} ${x}`}let Y=Ke(M,"balance",15),se=oe(10),je=oe("10"),Pe=oe(1),$=oe(!1),ae=oe(null),le=oe(Ne([])),q=null,ve=Se(()=>a(se)>0&&a(se)<=Y()&&a(se)<=U&&!a($));function O(g){a($)||(h(Pe,g,!0),ze("click"))}function _(g){const p=Math.min(g,Math.min(Y(),U));p>=0&&(h(se,p,!0),h(je,p.toLocaleString(),!0))}function V(g){const p=g.target,C=p.value.replace(/,/g,""),y=parseFloat(C)||0,j=Math.min(y,Math.min(Y(),U));h(se,j,!0),h(je,p.value,!0)}function w(){h(je,a(se).toLocaleString(),!0)}async function J(){var C;if(!a(ve))return;h($,!0),h(ae,null),a(le).forEach(clearTimeout),h(le,[],!0);const g=20,p=1500;try{const y=await fetch("/api/gambling/dice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedNumber:a(Pe),amount:a(se)})});if(!y.ok){const x=await y.json();throw new Error(x.error||"Failed to place bet")}const j=await y.json();ze("dice"),q&&(q.style.transition="none",q.style.transform=de(a(Pe),!1),q.offsetHeight,q.style.transition="transform 1.5s cubic-bezier(0.1, 0.9, 0.1, 1)",q.style.transform=de(j.result,!0,g)),await new Promise(x=>setTimeout(x,p)),await new Promise(x=>setTimeout(x,200)),Y(j.newBalance),h(ae,j,!0),(C=M.onBalanceUpdate)==null||C.call(M,j.newBalance),j.won?(Ge(Ve),gt(Ve)):ze("lose"),h($,!1)}catch(y){console.error("Dice roll error:",y),ot.error("Roll failed",{description:y instanceof Error?y.message:"Unknown error occurred"}),h($,!1),a(le).forEach(clearTimeout),h(le,[],!0)}}Qe(async()=>{var g;Xe.load();try{const p=await st();p&&(Y(p.baseCurrencyBalance),(g=M.onBalanceUpdate)==null||g.call(M,p.baseCurrencyBalance))}catch(p){console.error("Failed to fetch balance:",p)}}),et(Ae,{children:(g,p)=>{var C=oa(),y=_e(C);rt(y,{children:(x,Q)=>{var A=Qt(),f=_e(A);nt(f,{children:(t,e)=>{F();var r=D("Dice");u(t,r)},$$slots:{default:!0}});var v=s(f,2);at(v,{children:(t,e)=>{F();var r=D("Choose a number and roll the dice to win 3x your bet!");u(t,r)},$$slots:{default:!0}}),u(x,A)},$$slots:{default:!0}});var j=s(y,2);tt(j,{children:(x,Q)=>{var A=na(),f=d(A),v=d(f),t=s(d(v),2),e=d(t,!0);i(t),i(v);var r=s(v,2),o=d(r),n=d(o);Ue(n,20,()=>Array(6),We,(z,ne,G)=>{var pe=ea(),Me=d(pe);Ue(Me,21,()=>Array(G+1),We,(R,X,k,$e)=>{var Te=Xt();u(R,Te)}),i(Me),i(pe),we(R=>ct(pe,`transform: ${R??""}`),[()=>te(G+1)]),u(z,pe)}),i(n),_t(n,z=>q=z,()=>q),i(o),i(r);var l=s(r,2),m=d(l);{var c=z=>{var ne=ra(),G=d(ne);{var pe=R=>{var X=ta(),k=s(_e(X),2),$e=d(k);i(k),we(Te=>be($e,`Won ${Te??""} on ${a(ae).result??""}`),[()=>Re(a(ae).payout)]),u(R,X)},Me=R=>{var X=aa(),k=s(_e(X),2),$e=d(k);i(k),we(Te=>be($e,`Lost ${Te??""} on ${a(ae).result??""}`),[()=>Re(a(ae).amountWagered)]),u(R,X)};Ee(G,R=>{a(ae).won?R(pe):R(Me,!1)})}i(ne),u(z,ne)};Ee(m,z=>{a(ae)&&!a($)&&z(c)})}i(l),i(f);var b=s(f,2),S=d(b),P=s(d(S),2);Ue(P,20,()=>Array(6),We,(z,ne,G)=>{const pe=Se(()=>a(Pe)===G+1?"default":"outline");ee(z,{get variant(){return a(pe)},onclick:()=>O(G+1),get disabled(){return a($)},class:"h-16",children:(Me,R)=>{F();var X=D();X.nodeValue=G+1,u(Me,X)},$$slots:{default:!0}})}),i(P),i(S);var E=s(S,2),K=s(d(E),2);He(K,{id:"bet-amount",type:"text",get value(){return a(je)},oninput:V,onblur:w,get disabled(){return a($)},placeholder:"Enter bet amount"});var re=s(K,2),B=d(re);i(re),i(E);var T=s(E,2),H=d(T),N=d(H);ee(N,{size:"sm",variant:"outline",onclick:()=>_(Math.floor(Math.min(Y()||0,U)*.25)),get disabled(){return a($)},children:(z,ne)=>{F();var G=D("25%");u(z,G)},$$slots:{default:!0}});var fe=s(N,2);ee(fe,{size:"sm",variant:"outline",onclick:()=>_(Math.floor(Math.min(Y()||0,U)*.5)),get disabled(){return a($)},children:(z,ne)=>{F();var G=D("50%");u(z,G)},$$slots:{default:!0}});var me=s(fe,2);ee(me,{size:"sm",variant:"outline",onclick:()=>_(Math.floor(Math.min(Y()||0,U)*.75)),get disabled(){return a($)},children:(z,ne)=>{F();var G=D("75%");u(z,G)},$$slots:{default:!0}});var ie=s(me,2);ee(ie,{size:"sm",variant:"outline",onclick:()=>_(Math.floor(Math.min(Y()||0,U))),get disabled(){return a($)},children:(z,ne)=>{F();var G=D("Max");u(z,G)},$$slots:{default:!0}}),i(H),i(T);var Ce=s(T,2);const xe=Se(()=>!a(ve));ee(Ce,{class:"h-12 w-full text-lg",onclick:J,get disabled(){return a(xe)},children:(z,ne)=>{F();var G=D();we(()=>be(G,a($)?"Rolling...":"Roll")),u(z,G)},$$slots:{default:!0}}),i(b),i(A),we((z,ne)=>{be(e,z),be(B,`Max bet: ${ne??""}`)},[()=>Re(Y()),()=>U.toLocaleString()]),u(x,A)},$$slots:{default:!0}}),u(g,C)},$$slots:{default:!0}}),Ye()}var la=Z('<div class="flex h-96 items-center justify-center"><div class="text-center"><div class="text-muted-foreground mb-4 text-xl">Sign in to start gambling</div> <p class="text-muted-foreground mb-4 text-sm">You need an account to gamble away your life savings</p> <!></div></div>'),ia=Z('<div class="mb-6 flex justify-center gap-4"><!> <!> <!> <!></div> <!>',1),ca=Z('<!> <!> <div class="container mx-auto max-w-4xl p-6"><h1 class="mb-6 text-center text-3xl font-bold">Gambling</h1> <!></div>',1);function Ba(Ae,M){Ze(M,!0);const[U,Be]=xt(),ce=()=>ut(mt,"$PORTFOLIO_SUMMARY",U),ye=()=>ut(wt,"$USER_DATA",U);let W=oe(!1),L=oe(0),te=oe("coinflip");function I(ae){h(L,ae,!0),ce()&&mt.update(le=>le?{...le,baseCurrencyBalance:ae,totalValue:ae+le.totalCoinValue}:null)}pt(()=>{ye()&&ce()&&h(L,ce().baseCurrencyBalance,!0)});var de=ca(),ue=_e(de);Pt(ue,{title:"Gambling - Rugplay",description:"Play virtual gambling games with simulated currency in Rugplay. Try coinflip, slots, and mines games using virtual money with no real-world value - purely for entertainment.",keywords:"virtual gambling simulation, coinflip game, slots game, mines game, virtual casino, simulated gambling, entertainment games"});var Y=s(ue,2);St(Y,{get open(){return a(W)},set open(ae){h(W,ae,!0)}});var se=s(Y,2),je=s(d(se),2);{var Pe=ae=>{var le=la(),q=d(le),ve=s(d(q),4);ee(ve,{onclick:()=>h(W,!0),children:(O,_)=>{F();var V=D("Sign In");u(O,V)},$$slots:{default:!0}}),i(q),i(le),u(ae,le)},$=ae=>{var le=ia(),q=_e(le),ve=d(q);const O=Se(()=>a(te)==="coinflip"?"default":"outline");ee(ve,{get variant(){return a(O)},onclick:()=>h(te,"coinflip"),children:(x,Q)=>{F();var A=D("Coinflip");u(x,A)},$$slots:{default:!0}});var _=s(ve,2);const V=Se(()=>a(te)==="slots"?"default":"outline");ee(_,{get variant(){return a(V)},onclick:()=>h(te,"slots"),children:(x,Q)=>{F();var A=D("Slots");u(x,A)},$$slots:{default:!0}});var w=s(_,2);const J=Se(()=>a(te)==="mines"?"default":"outline");ee(w,{get variant(){return a(J)},onclick:()=>h(te,"mines"),children:(x,Q)=>{F();var A=D("Mines");u(x,A)},$$slots:{default:!0}});var g=s(w,2);const p=Se(()=>a(te)==="dice"?"default":"outline");ee(g,{get variant(){return a(p)},onclick:()=>h(te,"dice"),children:(x,Q)=>{F();var A=D("Dice");u(x,A)},$$slots:{default:!0}}),i(q);var C=s(q,2);{var y=x=>{Rt(x,{onBalanceUpdate:I,get balance(){return a(L)},set balance(Q){h(L,Q,!0)}})},j=(x,Q)=>{{var A=v=>{Vt(v,{onBalanceUpdate:I,get balance(){return a(L)},set balance(t){h(L,t,!0)}})},f=(v,t)=>{{var e=o=>{Kt(o,{onBalanceUpdate:I,get balance(){return a(L)},set balance(n){h(L,n,!0)}})},r=(o,n)=>{{var l=m=>{sa(m,{onBalanceUpdate:I,get balance(){return a(L)},set balance(c){h(L,c,!0)}})};Ee(o,m=>{a(te)==="dice"&&m(l)},n)}};Ee(v,o=>{a(te)==="mines"?o(e):o(r,!1)},t)}};Ee(x,v=>{a(te)==="slots"?v(A):v(f,!1)},Q)}};Ee(C,x=>{a(te)==="coinflip"?x(y):x(j,!1)})}u(ae,le)};Ee(je,ae=>{ye()?ae($,!1):ae(Pe)})}i(se),u(Ae,de),Ye(),Be()}export{Ba as component};
