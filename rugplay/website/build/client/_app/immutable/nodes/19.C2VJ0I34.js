import{f as a,a as t,c as $e,p as Ft,b as qt,t as N,s as ie,g as St}from"../chunks/BiLdCT7w.js";import{o as er}from"../chunks/DBnYf9wq.js";import{c as i,i as l,s as r,r as d,p as Et,h as tr,a as Yt,e as m,b as Be,n as g,g as e,t as be,d as D,f as rr}from"../chunks/Dc9Cd6uL.js";import{i as ce}from"../chunks/4JrI1xkN.js";import{c}from"../chunks/DKQvO5e2.js";import{C as Ne}from"../chunks/BE8a_9Ge.js";import{C as qe}from"../chunks/D0g6TdLa.js";import{C as xt}from"../chunks/CTo_Vl_F.js";import{i as ut,e as Ot,f as sr,h as ar}from"../chunks/aor5dgAF.js";import{C as We}from"../chunks/b_f0gCBc.js";import{C as Qe}from"../chunks/jS9pjJ83.js";import{B as Je}from"../chunks/PVG7Em25.js";import{T as Dt,a as Ht,b as mt,c as ke,d as Rt,e as Fe,D as It}from"../chunks/E71pIGAW.js";import{e as ht,i as gt}from"../chunks/DT6MbhOo.js";import{S as u}from"../chunks/DZFQxItp.js";import{S as or}from"../chunks/BGGxhLCO.js";import{t as Ze}from"../chunks/BR_bh9L_.js";import{g as pt}from"../chunks/BnkorlfL.js";import{U as lr}from"../chunks/CTHXnj9k.js";import{a as zt,f as nr}from"../chunks/DORihvSD.js";import{D as dr,R as ir}from"../chunks/BpTyYBFh.js";import{R as Ut,S as Bt,a as Lt,b as Vt,c as bt}from"../chunks/BZ8NTllV.js";import{I as jt}from"../chunks/5J9eaWb4.js";import{L as _t}from"../chunks/Ct87CVwI.js";import{B as Ct}from"../chunks/BvtTpaCk.js";import{D as cr,a as vr,b as ur}from"../chunks/CpfRlYS9.js";import{S as Tt,D as Wt}from"../chunks/DOGd6fBh.js";import{C as $r}from"../chunks/D6BgCw_H.js";import{D as fr}from"../chunks/CTgw-KxQ.js";import{L as mr}from"../chunks/khItcEfd.js";import{S as pr}from"../chunks/BUFrtusw.js";import{W as Mt}from"../chunks/DP7Et4ci.js";import{T as _r}from"../chunks/CvioT2Jg.js";import{R as Nt}from"../chunks/B8Any_pz.js";var hr=a("<!> <!>",1),gr=a("<!> <!>",1),xr=a("<!> <!>",1),wr=a("<!> <!>",1),yr=a("<!> <!> <!> <!> <!> <!>",1),Pr=a('<div class="flex items-center gap-2"><!> <div><!> <!></div></div>'),br=a("<!> <!> <!> <!> <!> <!>",1),Cr=a("<!> <!>",1),Sr=a("<!> <!>",1),Tr=a("<!> <!>",1),Ar=a('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),kr=a("<!> <!> <!> <!> <!> <!>",1),Fr=a('<div class="flex items-center gap-2"><!> <div><!> <!></div></div>'),Or=a("<!> <!> <!> <!> <!> <!>",1),Dr=a("<!> <!>",1),Hr=a("<!> <!>",1),Rr=a('<div class="container mx-auto max-w-7xl"><div class="mb-6 grid grid-cols-1 gap-4 md:mb-8 lg:grid-cols-3"></div> <!> <!></div>');function Ir(nt){var Ce=Rr(),Ee=i(Ce);ht(Ee,4,()=>Array(3),gt,(_e,Le)=>{Ne(_e,{class:"gap-1 overflow-hidden",children:(j,v)=>{var z=xr(),p=l(z);We(p,{children:(y,W)=>{Qe(y,{class:"flex items-center gap-2",children:(P,k)=>{var U=hr(),S=l(U);u(S,{class:"h-4 w-4"});var ae=r(S,2);u(ae,{class:"h-4 w-16"}),t(P,U)},$$slots:{default:!0}})},$$slots:{default:!0}});var se=r(p,2);qe(se,{children:(y,W)=>{var P=gr(),k=l(P);u(k,{class:"h-8 w-24 md:h-9 md:w-32"});var U=r(k,2);u(U,{class:"mt-2 h-3 w-20 md:w-24"}),t(y,P)},$$slots:{default:!0}}),t(j,z)},$$slots:{default:!0}})}),d(Ee);var et=r(Ee,2);Ne(et,{class:"overflow-hidden",children:(_e,Le)=>{var j=Sr(),v=l(j);We(v,{class:"pb-3 md:pb-4",children:(p,se)=>{var y=wr(),W=l(y);Qe(W,{children:(k,U)=>{u(k,{class:"h-5 w-32 md:h-6 md:w-40"})},$$slots:{default:!0}});var P=r(W,2);xt(P,{children:(k,U)=>{u(k,{class:"h-3 w-48 md:h-4 md:w-64"})},$$slots:{default:!0}}),t(p,y)},$$slots:{default:!0}});var z=r(v,2);qe(z,{class:"p-3 pt-0 md:p-6 md:pt-0",children:(p,se)=>{Dt(p,{children:(y,W)=>{var P=Cr(),k=l(P);Ht(k,{children:(S,ae)=>{mt(S,{children:(X,fe)=>{var Q=yr(),me=l(Q);ke(me,{class:"w-[30%] min-w-[120px] md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var ve=r(me,2);ke(ve,{class:"w-[20%] min-w-[80px] md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var he=r(ve,2);ke(he,{class:"w-[15%] min-w-[70px] md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var oe=r(he,2);ke(oe,{class:"w-[20%] min-w-[80px] md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var Z=r(oe,2);ke(Z,{class:"w-[15%] min-w-[70px] md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var ge=r(Z,2);ke(ge,{class:"hidden md:table-cell md:w-[12%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}}),t(X,Q)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=r(k,2);Rt(U,{children:(S,ae)=>{var X=$e(),fe=l(X);ht(fe,0,()=>Array(4),gt,(Q,me)=>{mt(Q,{children:(ve,he)=>{var oe=br(),Z=l(oe);Fe(Z,{children:(s,o)=>{var _=Pr(),M=i(_);u(M,{class:"h-6 w-6 rounded-full"});var C=r(M,2),ee=i(C);u(ee,{class:"h-4 w-16"});var xe=r(ee,2);u(xe,{class:"mt-1 h-3 w-12"}),d(C),d(_),t(s,_)},$$slots:{default:!0}});var ge=r(Z,2);Fe(ge,{children:(s,o)=>{u(s,{class:"h-4 w-16"})},$$slots:{default:!0}});var f=r(ge,2);Fe(f,{children:(s,o)=>{u(s,{class:"h-4 w-12"})},$$slots:{default:!0}});var B=r(f,2);Fe(B,{children:(s,o)=>{u(s,{class:"h-5 w-14 rounded-md"})},$$slots:{default:!0}});var Ve=r(B,2);Fe(Ve,{children:(s,o)=>{u(s,{class:"h-4 w-16"})},$$slots:{default:!0}});var Ge=r(Ve,2);Fe(Ge,{class:"hidden md:table-cell",children:(s,o)=>{u(s,{class:"h-5 w-12 rounded-md"})},$$slots:{default:!0}}),t(ve,oe)},$$slots:{default:!0}})}),t(S,X)},$$slots:{default:!0}}),t(y,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(_e,j)},$$slots:{default:!0}});var Ye=r(et,2);Ne(Ye,{class:"mt-6 overflow-hidden md:mt-8",children:(_e,Le)=>{var j=Hr(),v=l(j);We(v,{class:"pb-3 md:pb-4",children:(p,se)=>{var y=Ar(),W=i(y),P=i(W);Qe(P,{class:"flex items-center gap-2",children:(S,ae)=>{var X=Tr(),fe=l(X);u(fe,{class:"h-5 w-5"});var Q=r(fe,2);u(Q,{class:"h-5 w-32 md:h-6 md:w-40"}),t(S,X)},$$slots:{default:!0}});var k=r(P,2);xt(k,{class:"mt-1",children:(S,ae)=>{u(S,{class:"h-3 w-40 md:h-4 md:w-48"})},$$slots:{default:!0}}),d(W);var U=r(W,2);u(U,{class:"h-8 w-16 rounded-md md:w-20"}),d(y),t(p,y)},$$slots:{default:!0}});var z=r(v,2);qe(z,{class:"p-3 pt-0 md:p-6 md:pt-0",children:(p,se)=>{Dt(p,{children:(y,W)=>{var P=Dr(),k=l(P);Ht(k,{children:(S,ae)=>{mt(S,{children:(X,fe)=>{var Q=kr(),me=l(Q);ke(me,{class:"w-[15%] min-w-[60px] md:w-[10%]",children:(f,B)=>{u(f,{class:"h-4 w-12"})},$$slots:{default:!0}});var ve=r(me,2);ke(ve,{class:"w-[30%] min-w-[100px] md:w-[20%]",children:(f,B)=>{u(f,{class:"h-4 w-12"})},$$slots:{default:!0}});var he=r(ve,2);ke(he,{class:"w-[20%] min-w-[80px] md:w-[15%]",children:(f,B)=>{u(f,{class:"h-4 w-16"})},$$slots:{default:!0}});var oe=r(he,2);ke(oe,{class:"w-[15%] min-w-[70px] md:w-[15%]",children:(f,B)=>{u(f,{class:"h-4 w-12"})},$$slots:{default:!0}});var Z=r(oe,2);ke(Z,{class:"w-[20%] min-w-[70px] md:w-[15%]",children:(f,B)=>{u(f,{class:"h-4 w-12"})},$$slots:{default:!0}});var ge=r(Z,2);ke(ge,{class:"hidden md:table-cell md:w-[25%]",children:(f,B)=>{u(f,{class:"h-4 w-12"})},$$slots:{default:!0}}),t(X,Q)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=r(k,2);Rt(U,{children:(S,ae)=>{var X=$e(),fe=l(X);ht(fe,0,()=>Array(5),gt,(Q,me)=>{mt(Q,{children:(ve,he)=>{var oe=Or(),Z=l(oe);Fe(Z,{children:(s,o)=>{u(s,{class:"h-5 w-10 rounded-md"})},$$slots:{default:!0}});var ge=r(Z,2);Fe(ge,{children:(s,o)=>{var _=Fr(),M=i(_);u(M,{class:"h-4 w-4 rounded-full"});var C=r(M,2),ee=i(C);u(ee,{class:"h-4 w-12"});var xe=r(ee,2);u(xe,{class:"mt-1 h-3 w-10"}),d(C),d(_),t(s,_)},$$slots:{default:!0}});var f=r(ge,2);Fe(f,{children:(s,o)=>{u(s,{class:"h-4 w-16 font-mono"})},$$slots:{default:!0}});var B=r(f,2);Fe(B,{children:(s,o)=>{u(s,{class:"h-4 w-16"})},$$slots:{default:!0}});var Ve=r(B,2);Fe(Ve,{children:(s,o)=>{u(s,{class:"h-4 w-16"})},$$slots:{default:!0}});var Ge=r(Ve,2);Fe(Ge,{class:"hidden md:table-cell",children:(s,o)=>{u(s,{class:"h-4 w-24"})},$$slots:{default:!0}}),t(ve,oe)},$$slots:{default:!0}})}),t(S,X)},$$slots:{default:!0}}),t(y,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(_e,j)},$$slots:{default:!0}}),d(Ce),t(nt,Ce)}var Ur=a("<!> Send",1),Br=a("<!> <!>",1),Lr=a('<div class="flex items-center gap-2"><!> Cash ($)</div>'),Vr=a('<div class="flex items-center gap-2"><!> Coins</div>'),jr=a("<!> <!>",1),Mr=a("<!> <!>",1),Nr=a("<!> <!>",1),qr=a('<div class="space-y-2"><!> <!></div>'),Er=a('<p class="text-muted-foreground"> </p>'),Yr=a('<p class="text-muted-foreground text-xs">Minimum: $10.00 per transfer</p>'),zr=a('<p class="text-muted-foreground text-xs">Minimum estimated value: $10.00 per transfer</p>'),Wr=a('<span class="text-muted-foreground text-xs"> </span>'),Qr=a(`<div class="bg-muted/50 rounded-lg p-3"><div class="flex items-center justify-between"><span class="text-sm font-medium">You're sending:</span> <div class="text-right"><span class="block font-bold"> </span> <!></div></div> <div class="flex items-center justify-between"><span class="text-sm font-medium">To:</span> <span class="font-bold"> </span></div></div>`),Jr=a("<!> Sending...",1),Gr=a("<!> Send",1),Kr=a("<!> <!>",1),Xr=a('<!> <div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <!> <div class="space-y-2"><!> <div class="flex gap-2"><!> <!></div> <div class="flex justify-between text-xs"><p class="text-muted-foreground"> </p> <!></div> <!></div> <!> <!></div> <!>',1);function Zr(nt,Ce){Et(Ce,!0);const[Ee,et]=qt(),Ye=()=>St(zt,"$PORTFOLIO_DATA",Ee);let _e=Ft(Ce,"open",15,!1),Le=Ft(Ce,"prefilledUsername",3,""),j=Be(""),v=Be("CASH"),z=Be(""),p=Be(""),se=Be(!1),y=D(()=>parseFloat(e(z))||0),W=D(()=>e(y)>0),P=D(()=>e(j).trim().length>0),k=D(()=>Ye()?Ye().baseCurrencyBalance:0),U=D(()=>Ye()?Ye().coinHoldings:[]),S=D(()=>e(U).find(_=>_.symbol===e(p))),ae=D(()=>e(v)==="COIN"&&e(S)&&e(y)>0?e(y)*e(S).currentPrice:0),X=D(()=>e(v)==="CASH"?e(k):e(S)?e(S).quantity:0),fe=D(()=>e(v)==="CASH"?e(y)<=e(k):e(S)?e(y)<=e(S).quantity:!1),Q=D(()=>e(v)==="CASH"?e(y)>=10:!0),me=D(()=>e(v)==="COIN"?e(ae)>=10:!0),ve=D(()=>e(W)&&e(P)&&e(fe)&&e(Q)&&e(me)&&!e(se)&&(e(v)==="CASH"||e(p).length>0));function he(){_e(!1),m(j,""),m(v,"CASH"),m(z,""),m(p,""),m(se,!1)}function oe(){e(v)==="CASH"?m(z,Math.max(e(X),10).toString(),!0):m(z,e(X).toString(),!0)}function Z(_){m(v,_,!0),_==="CASH"?m(p,""):e(U).length>0&&m(p,e(U)[0].symbol,!0),m(z,"")}tr(()=>{_e()&&Le()&&m(j,Le())});async function ge(){var _;if(e(ve)){m(se,!0);try{const M=await fetch("/api/transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientUsername:e(j).trim(),type:e(v),amount:e(y),coinSymbol:e(v)==="COIN"?e(p):void 0})}),C=await M.json();if(!M.ok)throw C.message?new Error(C.message):new Error(C.error||"Transfer failed");if(C.type==="CASH")Ze.success("Money sent successfully!",{description:`Sent $${C.amount.toFixed(2)} to @${C.recipient}`});else{const ee=e(ae);Ze.success("Coins sent successfully!",{description:`Sent ${C.amount.toFixed(6)} ${C.coinSymbol} (≈$${ee.toFixed(2)}) to @${C.recipient}`})}(_=Ce.onSuccess)==null||_.call(Ce),he()}catch(M){Ze.error("Transfer failed",{description:M.message})}finally{m(se,!1)}}}let f=[{value:"CASH",label:"Cash ($)"},{value:"COIN",label:"Coins"}],B=D(()=>{var _;return((_=f.find(M=>M.value===e(v)))==null?void 0:_.label)||"Select transfer type"}),Ve=D(()=>e(p)?(()=>{const _=e(U).find(M=>M.symbol===e(p));return _?`*${_.symbol} (${_.quantity.toFixed(6)} available)`:e(p)})():"Select coin to send");function Ge(_){m(p,_,!0)}var s=$e(),o=l(s);c(o,()=>ir,(_,M)=>{M(_,{get open(){return _e()},set open(C){_e(C)},children:(C,ee)=>{var xe=$e(),dt=l(xe);c(dt,()=>dr,(Oe,De)=>{De(Oe,{class:"sm:max-w-md",children:(He,Ke)=>{var Xe=Xr(),tt=l(Xe);c(tt,()=>cr,(n,w)=>{w(n,{children:(h,G)=>{var A=Br(),re=l(A);c(re,()=>vr,(K,Y)=>{Y(K,{class:"flex items-center gap-2",children:(de,pe)=>{var I=Ur(),ye=l(I);Tt(ye,{class:"h-5 w-5"}),g(),t(de,I)},$$slots:{default:!0}})});var ne=r(re,2);c(ne,()=>ur,(K,Y)=>{Y(K,{children:(de,pe)=>{g();var I=N("Send cash or coins to another user");t(de,I)},$$slots:{default:!0}})}),t(h,A)},$$slots:{default:!0}})});var ze=r(tt,2),rt=i(ze),st=i(rt);_t(st,{for:"recipient",children:(n,w)=>{g();var h=N("Recipient");t(n,h)},$$slots:{default:!0}});var wt=r(st,2);jt(wt,{id:"recipient",type:"text",placeholder:"Enter username (without @)",class:"flex-1",get value(){return e(j)},set value(n){m(j,n,!0)}}),d(rt);var J=r(rt,2),le=i(J);_t(le,{children:(n,w)=>{g();var h=N("Type");t(n,h)},$$slots:{default:!0}});var we=r(le,2);c(we,()=>Ut,(n,w)=>{w(n,{type:"single",onValueChange:Z,get value(){return e(v)},set value(h){m(v,h,!0)},children:(h,G)=>{var A=Mr(),re=l(A);c(re,()=>Bt,(K,Y)=>{Y(K,{class:"w-full",children:(de,pe)=>{g();var I=N();be(()=>ie(I,e(B))),t(de,I)},$$slots:{default:!0}})});var ne=r(re,2);c(ne,()=>Lt,(K,Y)=>{Y(K,{children:(de,pe)=>{var I=$e(),ye=l(I);c(ye,()=>Vt,(Me,Ae)=>{Ae(Me,{children:(Pe,at)=>{var $t=jr(),ft=l($t);c(ft,()=>bt,(ot,it)=>{it(ot,{value:"CASH",label:"Cash ($)",children:(ct,lt)=>{var Ue=Lr(),vt=i(Ue);Wt(vt,{class:"h-4 w-4"}),g(),d(Ue),t(ct,Ue)},$$slots:{default:!0}})});var Pt=r(ft,2);const At=D(()=>e(U).length===0);c(Pt,()=>bt,(ot,it)=>{it(ot,{value:"COIN",label:"Coins",get disabled(){return e(At)},children:(ct,lt)=>{var Ue=Vr(),vt=i(Ue);$r(vt,{class:"h-4 w-4"}),g(),d(Ue),t(ct,Ue)},$$slots:{default:!0}})}),t(Pe,$t)},$$slots:{default:!0}})}),t(de,I)},$$slots:{default:!0}})}),t(h,A)},$$slots:{default:!0}})}),d(J);var Re=r(J,2);{var te=n=>{var w=qr(),h=i(w);_t(h,{children:(A,re)=>{g();var ne=N("Select Coin");t(A,ne)},$$slots:{default:!0}});var G=r(h,2);c(G,()=>Ut,(A,re)=>{re(A,{type:"single",onValueChange:Ge,get value(){return e(p)},set value(ne){m(p,ne,!0)},children:(ne,K)=>{var Y=Nr(),de=l(Y);c(de,()=>Bt,(I,ye)=>{ye(I,{class:"w-full",children:(Me,Ae)=>{g();var Pe=N();be(()=>ie(Pe,e(Ve))),t(Me,Pe)},$$slots:{default:!0}})});var pe=r(de,2);c(pe,()=>Lt,(I,ye)=>{ye(I,{children:(Me,Ae)=>{var Pe=$e(),at=l(Pe);c(at,()=>Vt,($t,ft)=>{ft($t,{children:(Pt,At)=>{var ot=$e(),it=l(ot);ht(it,17,()=>e(U),gt,(ct,lt)=>{var Ue=$e(),vt=l(Ue);c(vt,()=>bt,(Gt,Kt)=>{Kt(Gt,{get value(){return e(lt).symbol},get label(){return`*${e(lt).symbol??""}`},children:(Xt,ws)=>{g();var kt=N();be(Zt=>ie(kt,`*${e(lt).symbol??""} (${Zt??""} available)`),[()=>e(lt).quantity.toFixed(6)]),t(Xt,kt)},$$slots:{default:!0}})}),t(ct,Ue)}),t(Pt,ot)},$$slots:{default:!0}})}),t(Me,Pe)},$$slots:{default:!0}})}),t(ne,Y)},$$slots:{default:!0}})}),d(w),t(n,w)};ce(Re,n=>{e(v)==="COIN"&&n(te)})}var q=r(Re,2),Se=i(q);_t(Se,{for:"amount",children:(n,w)=>{g();var h=N();be(()=>ie(h,e(v)==="CASH"?"Amount ($)":`Amount (${e(p)})`)),t(n,h)},$$slots:{default:!0}});var T=r(Se,2),H=i(T);const L=D(()=>e(v)==="CASH"?"0.01":"0.000001");jt(H,{id:"amount",type:"number",get step(){return e(L)},min:"0",placeholder:"0.00",class:"flex-1",get value(){return e(z)},set value(n){m(z,n,!0)}});var ue=r(H,2);Je(ue,{variant:"outline",size:"sm",onclick:oe,children:(n,w)=>{g();var h=N("Max");t(n,h)},$$slots:{default:!0}}),d(T);var $=r(T,2),b=i($),V=i(b);d(b);var F=r(b,2);{var R=n=>{var w=Er(),h=i(w);d(w),be(G=>ie(h,`≈ $${G??""}`),[()=>e(ae).toFixed(2)]),t(n,w)};ce(F,n=>{e(v)==="COIN"&&e(ae)>0&&n(R)})}d($);var O=r($,2);{var x=n=>{var w=Yr();t(n,w)},E=(n,w)=>{{var h=G=>{var A=zr();t(G,A)};ce(n,G=>{e(v)==="COIN"&&G(h)},w)}};ce(O,n=>{e(v)==="CASH"?n(x):n(E,!1)})}d(q);var Te=r(q,2);{var je=n=>{Ct(n,{variant:"destructive",class:"text-xs",children:(w,h)=>{g();var G=N();be(()=>ie(G,`Insufficient ${e(v)==="CASH"?"funds":"coins"}`)),t(w,G)},$$slots:{default:!0}})},Ie=(n,w)=>{{var h=A=>{Ct(A,{variant:"destructive",class:"text-xs",children:(re,ne)=>{g();var K=N("Cash transfers require a minimum of $10.00");t(re,K)},$$slots:{default:!0}})},G=(A,re)=>{{var ne=K=>{Ct(K,{variant:"destructive",class:"text-xs",children:(Y,de)=>{g();var pe=N("Coin transfers require a minimum estimated value of $10.00");t(Y,pe)},$$slots:{default:!0}})};ce(A,K=>{!e(me)&&e(W)&&K(ne)},re)}};ce(n,A=>{!e(Q)&&e(W)?A(h):A(G,!1)},w)}};ce(Te,n=>{!e(fe)&&e(W)?n(je):n(Ie,!1)})}var yt=r(Te,2);{var Qt=n=>{var w=Qr(),h=i(w),G=r(i(h),2),A=i(G),re=i(A,!0);d(A);var ne=r(A,2);{var K=I=>{var ye=Wr(),Me=i(ye);d(ye),be(Ae=>ie(Me,`≈ $${Ae??""} USD`),[()=>e(ae).toFixed(2)]),t(I,ye)};ce(ne,I=>{e(v)==="COIN"&&e(ae)>0&&I(K)})}d(G),d(h);var Y=r(h,2),de=r(i(Y),2),pe=i(de);d(de),d(Y),d(w),be(I=>{ie(re,I),ie(pe,`@${e(j)??""}`)},[()=>e(v)==="CASH"?`$${e(y).toFixed(2)}`:`${e(y).toFixed(6)} ${e(p)}`]),t(n,w)};ce(yt,n=>{e(W)&&e(fe)&&e(P)&&e(Q)&&e(me)&&n(Qt)})}d(ze);var Jt=r(ze,2);c(Jt,()=>fr,(n,w)=>{w(n,{class:"flex gap-2",children:(h,G)=>{var A=Kr(),re=l(A);Je(re,{variant:"outline",onclick:he,get disabled(){return e(se)},children:(Y,de)=>{g();var pe=N("Cancel");t(Y,pe)},$$slots:{default:!0}});var ne=r(re,2);const K=D(()=>!e(ve));Je(ne,{onclick:ge,get disabled(){return e(K)},children:(Y,de)=>{var pe=$e(),I=l(pe);{var ye=Ae=>{var Pe=Jr(),at=l(Pe);mr(at,{class:"h-4 w-4 animate-spin"}),g(),t(Ae,Pe)},Me=Ae=>{var Pe=Gr(),at=l(Pe);Tt(at,{class:"h-4 w-4"}),g(),t(Ae,Pe)};ce(I,Ae=>{e(se)?Ae(ye):Ae(Me,!1)})}t(Y,pe)},$$slots:{default:!0}}),t(h,A)},$$slots:{default:!0}})}),be(n=>ie(V,`Available: ${n??""}`),[()=>e(v)==="CASH"?`$${e(k).toFixed(2)}`:e(S)?`${e(S).quantity.toFixed(6)} ${e(p)}`:"0"]),t(He,Xe)},$$slots:{default:!0}})}),t(C,xe)},$$slots:{default:!0}})}),t(nt,s),Yt(),et()}var es=a("<!> Send Money",1),ts=a('<div class="flex gap-2"><!></div>'),rs=a('<div class="flex h-96 items-center justify-center"><div class="text-center"><div class="text-muted-foreground mb-4 text-xl">You need to be logged in to view your portfolio</div> <!></div></div>'),ss=a('<div class="flex h-96 items-center justify-center"><div class="text-center"><div class="text-muted-foreground mb-4 text-xl"> </div> <!></div></div>'),as=a("<!> Total",1),os=a('<p class="text-3xl font-bold"> </p>'),ls=a("<!> <!>",1),ns=a("<!> Cash Balance",1),ds=a('<p class="text-3xl font-bold"> </p> <p class="text-muted-foreground text-xs"> </p>',1),is=a("<!> <!>",1),cs=a("<!> Coin Holdings",1),vs=a('<p class="text-3xl font-bold"> </p> <p class="text-muted-foreground text-xs"> </p>',1),us=a("<!> <!>",1),$s=a(`<div class="bg-muted mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full"><!></div> <h3 class="mb-2 text-lg font-semibold">No coin holdings</h3> <p class="text-muted-foreground mb-6">You haven't invested in any coins yet. Start by buying existing coins.</p> <div class="flex justify-center"><!></div>`,1),fs=a("<!> <!>",1),ms=a("<!> <!>",1),ps=a("<!> Recent Transactions",1),_s=a('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),hs=a("<!> <!>",1),gs=a('<div class="mb-8"><div class="mb-8 grid grid-cols-1 gap-4 lg:grid-cols-3"><!> <!> <!></div> <!> <!></div>'),xs=a('<!> <!> <!> <div class="container mx-auto max-w-7xl p-6"><div class="mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center"><div><h1 class="text-3xl font-bold">Portfolio</h1> <p class="text-muted-foreground">Manage your investments and transactions</p></div> <!></div> <!></div>',1);function ra(nt,Ce){Et(Ce,!0);const[Ee,et]=qt(),Ye=()=>St(zt,"$PORTFOLIO_DATA",Ee),_e=()=>St(lr,"$USER_DATA",Ee);let Le=Be(rr([])),j=Be(!0),v=Be(null),z=Be(!1),p=Be(!1);er(async()=>{await Promise.all([se(),y()]),m(j,!1)});async function se(){try{await nr()?m(v,null):(m(v,"Failed to load portfolio data"),Ze.error("Failed to load portfolio data"))}catch(s){console.error("Failed to fetch portfolio data:",s),m(v,"Failed to load portfolio data"),Ze.error("Failed to load portfolio data")}}async function y(){try{const s=await fetch("/api/transactions");if(s.ok){const o=await s.json();m(Le,o.transactions.slice(0,10),!0)}else Ze.error("Failed to load transactions")}catch(s){console.error("Failed to fetch transactions:",s),Ze.error("Failed to load transactions")}}async function W(){m(j,!0),m(v,null),await Promise.all([se(),y()]),m(j,!1)}let P=D(Ye),k=D(()=>e(P)?e(P).totalValue:0),U=D(()=>e(P)&&e(P).coinHoldings.length>0),S=D(()=>e(Le).length>0),ae=D(()=>[{key:"coin",label:"Coin",class:"w-[25%] min-w-[120px] md:w-[12%]",render:(s,o)=>({component:"coin",icon:o.icon,symbol:o.symbol,name:`*${o.symbol}`,size:6})},{key:"quantity",label:"Quantity",class:"w-[15%] min-w-[80px] md:w-[10%] font-mono",sortable:!0,render:s=>Ot(s)},{key:"currentPrice",label:"Price",class:"w-[12%] min-w-[70px] md:w-[10%] font-mono",sortable:!0,render:s=>`$${ar(s)}`},{key:"percentageChange",label:"P&L %",class:"w-[15%] min-w-[80px] md:w-[12%]",sortable:!0,render:s=>({component:"badge",variant:s>=0?"success":"destructive",text:`${s>=0?"+":""}${s.toFixed(2)}%`})},{key:"change24h",label:"24h Change",class:"w-[15%] min-w-[80px] md:w-[12%]",sortable:!0,render:s=>({component:"badge",variant:s>=0?"success":"destructive",text:`${s>=0?"+":""}${s.toFixed(2)}%`})},{key:"value",label:"Value",class:"w-[12%] min-w-[70px] md:w-[10%] font-mono font-medium",sortable:!0,defaultSort:!0,render:s=>ut(s)},{key:"portfolioPercent",label:"Portfolio %",class:"hidden md:table-cell md:w-[12%]",render:(s,o)=>({component:"badge",variant:"outline",text:`${(o.value/e(k)*100).toFixed(1)}%`})}]),X=D(()=>[{key:"type",label:"Type",class:"w-[12%] min-w-[60px] md:w-[8%]",render:(s,o)=>o.isTransfer?{component:"badge",variant:"default",text:o.isIncoming?"Received":"Sent",class:"text-xs"}:{component:"badge",variant:s==="BUY"?"success":"destructive",text:s==="BUY"?"Buy":"Sell",class:"text-xs"}},{key:"coin",label:"Coin",class:"w-[20%] min-w-[100px] md:w-[12%]",render:(s,o)=>o.isTransfer?o.isCoinTransfer&&o.coin?{component:"coin",icon:o.coin.icon,symbol:o.coin.symbol,name:`*${o.coin.symbol}`,size:4}:{component:"text",text:"-"}:{component:"coin",icon:o.coin.icon,symbol:o.coin.symbol,name:`*${o.coin.symbol}`,size:4}},{key:"sender",label:"Sender",class:"w-[12%] min-w-[70px] md:w-[10%]",render:(s,o)=>({component:"text",text:o.isTransfer?o.sender||"Unknown":"-",class:o.isTransfer&&o.sender&&o.sender!=="Unknown"?"font-medium":"text-muted-foreground"})},{key:"recipient",label:"Receiver",class:"w-[12%] min-w-[70px] md:w-[10%]",render:(s,o)=>({component:"text",text:o.isTransfer?o.recipient||"Unknown":"-",class:o.isTransfer&&o.recipient&&o.recipient!=="Unknown"?"font-medium":"text-muted-foreground"})},{key:"quantity",label:"Quantity",class:"w-[12%] min-w-[70px] md:w-[10%] font-mono text-sm",render:(s,o)=>o.isTransfer&&s===0?"-":Ot(s)},{key:"totalBaseCurrencyAmount",label:"Amount",class:"w-[12%] min-w-[70px] md:w-[10%] font-mono text-sm font-medium",render:s=>ut(s)},{key:"timestamp",label:"Date",class:"hidden md:table-cell md:w-[18%] text-muted-foreground text-sm",render:s=>sr(s)}]);async function fe(){await Promise.all([se(),y()])}var Q=xs(),me=l(Q);or(me,{title:"Portfolio - Rugplay",description:"View your virtual cryptocurrency portfolio, simulated holdings, and trading performance in the Rugplay simulation game platform.",noindex:!0,keywords:"virtual portfolio management, crypto holdings game, trading performance simulator, investment tracking game"});var ve=r(me,2);Zr(ve,{onSuccess:fe,get open(){return e(z)},set open(s){m(z,s,!0)}});var he=r(ve,2);pr(he,{get open(){return e(p)},set open(s){m(p,s,!0)}});var oe=r(he,2),Z=i(oe),ge=r(i(Z),2);{var f=s=>{var o=ts(),_=i(o);Je(_,{onclick:()=>m(z,!0),children:(M,C)=>{var ee=es(),xe=l(ee);Tt(xe,{class:"h-4 w-4"}),g(),t(M,ee)},$$slots:{default:!0}}),d(o),t(s,o)};ce(ge,s=>{_e()&&s(f)})}d(Z);var B=r(Z,2);{var Ve=s=>{Ir(s)},Ge=(s,o)=>{{var _=C=>{var ee=rs(),xe=i(ee),dt=r(i(xe),2);Je(dt,{onclick:()=>m(p,!0),children:(Oe,De)=>{g();var He=N("Sign In");t(Oe,He)},$$slots:{default:!0}}),d(xe),d(ee),t(C,ee)},M=(C,ee)=>{{var xe=Oe=>{var De=ss(),He=i(De),Ke=i(He),Xe=i(Ke,!0);d(Ke);var tt=r(Ke,2);Je(tt,{onclick:W,children:(ze,rt)=>{g();var st=N("Try Again");t(ze,st)},$$slots:{default:!0}}),d(He),d(De),be(()=>ie(Xe,e(v))),t(Oe,De)},dt=Oe=>{var De=gs(),He=i(De),Ke=i(He);c(Ke,()=>Ne,(J,le)=>{le(J,{class:"text-success gap-1",children:(we,Re)=>{var te=ls(),q=l(te);c(q,()=>We,(T,H)=>{H(T,{children:(L,ue)=>{var $=$e(),b=l($);c(b,()=>Qe,(V,F)=>{F(V,{class:"flex items-center gap-2 text-sm font-medium",children:(R,O)=>{var x=as(),E=l(x);Mt(E,{class:"h-4 w-4"}),g(),t(R,x)},$$slots:{default:!0}})}),t(L,$)},$$slots:{default:!0}})});var Se=r(q,2);c(Se,()=>qe,(T,H)=>{H(T,{children:(L,ue)=>{var $=os(),b=i($,!0);d($),be(V=>ie(b,V),[()=>ut(e(k))]),t(L,$)},$$slots:{default:!0}})}),t(we,te)},$$slots:{default:!0}})});var Xe=r(Ke,2);c(Xe,()=>Ne,(J,le)=>{le(J,{class:"gap-1",children:(we,Re)=>{var te=is(),q=l(te);c(q,()=>We,(T,H)=>{H(T,{children:(L,ue)=>{var $=$e(),b=l($);c(b,()=>Qe,(V,F)=>{F(V,{class:"flex items-center gap-2 text-sm font-medium",children:(R,O)=>{var x=ns(),E=l(x);Wt(E,{class:"h-4 w-4"}),g(),t(R,x)},$$slots:{default:!0}})}),t(L,$)},$$slots:{default:!0}})});var Se=r(q,2);c(Se,()=>qe,(T,H)=>{H(T,{children:(L,ue)=>{var $=ds(),b=l($),V=i(b,!0);d(b);var F=r(b,2),R=i(F,!0);d(F),be((O,x)=>{ie(V,O),ie(R,x)},[()=>{var O;return ut(((O=e(P))==null?void 0:O.baseCurrencyBalance)||0)},()=>{var O;return e(k)>0?`${((((O=e(P))==null?void 0:O.baseCurrencyBalance)||0)/e(k)*100).toFixed(1)}% of portfolio`:"100% of portfolio"}]),t(L,$)},$$slots:{default:!0}})}),t(we,te)},$$slots:{default:!0}})});var tt=r(Xe,2);c(tt,()=>Ne,(J,le)=>{le(J,{class:"gap-1",children:(we,Re)=>{var te=us(),q=l(te);c(q,()=>We,(T,H)=>{H(T,{children:(L,ue)=>{var $=$e(),b=l($);c(b,()=>Qe,(V,F)=>{F(V,{class:"flex items-center gap-2 text-sm font-medium",children:(R,O)=>{var x=cs(),E=l(x);_r(E,{class:"h-4 w-4"}),g(),t(R,x)},$$slots:{default:!0}})}),t(L,$)},$$slots:{default:!0}})});var Se=r(q,2);c(Se,()=>qe,(T,H)=>{H(T,{children:(L,ue)=>{var $=vs(),b=l($),V=i(b,!0);d(b);var F=r(b,2),R=i(F);d(F),be(O=>{var x;ie(V,O),ie(R,`${(((x=e(P))==null?void 0:x.coinHoldings.length)||0)??""} positions`)},[()=>{var O;return ut(((O=e(P))==null?void 0:O.totalCoinValue)||0)}]),t(L,$)},$$slots:{default:!0}})}),t(we,te)},$$slots:{default:!0}})}),d(He);var ze=r(He,2);{var rt=J=>{var le=$e(),we=l(le);c(we,()=>Ne,(Re,te)=>{te(Re,{children:(q,Se)=>{var T=$e(),H=l(T);c(H,()=>qe,(L,ue)=>{ue(L,{class:"py-16 text-center",children:($,b)=>{var V=$s(),F=l(V),R=i(F);Mt(R,{class:"text-muted-foreground h-8 w-8"}),d(F);var O=r(F,6),x=i(O);Je(x,{variant:"outline",onclick:()=>pt("/"),children:(E,Te)=>{g();var je=N("Browse Coins");t(E,je)},$$slots:{default:!0}}),d(O),t($,V)},$$slots:{default:!0}})}),t(q,T)},$$slots:{default:!0}})}),t(J,le)},st=J=>{var le=$e(),we=l(le);c(we,()=>Ne,(Re,te)=>{te(Re,{children:(q,Se)=>{var T=ms(),H=l(T);c(H,()=>We,(ue,$)=>{$(ue,{children:(b,V)=>{var F=fs(),R=l(F);c(R,()=>Qe,(x,E)=>{E(x,{children:(Te,je)=>{g();var Ie=N("Your Holdings");t(Te,Ie)},$$slots:{default:!0}})});var O=r(R,2);c(O,()=>xt,(x,E)=>{E(x,{children:(Te,je)=>{g();var Ie=N("Current positions in your portfolio");t(Te,Ie)},$$slots:{default:!0}})}),t(b,F)},$$slots:{default:!0}})});var L=r(H,2);c(L,()=>qe,(ue,$)=>{$(ue,{children:(b,V)=>{const F=D(()=>{var R;return((R=e(P))==null?void 0:R.coinHoldings)||[]});It(b,{get columns(){return e(ae)},get data(){return e(F)},onRowClick:R=>pt(`/coin/${R.symbol}`)})},$$slots:{default:!0}})}),t(q,T)},$$slots:{default:!0}})}),t(J,le)};ce(ze,J=>{e(U)?J(st,!1):J(rt)})}var wt=r(ze,2);c(wt,()=>Ne,(J,le)=>{le(J,{class:"mt-8",children:(we,Re)=>{var te=hs(),q=l(te);c(q,()=>We,(T,H)=>{H(T,{children:(L,ue)=>{var $=_s(),b=i($),V=i(b);c(V,()=>Qe,(x,E)=>{E(x,{class:"flex items-center gap-2",children:(Te,je)=>{var Ie=ps(),yt=l(Ie);Nt(yt,{class:"h-5 w-5"}),g(),t(Te,Ie)},$$slots:{default:!0}})});var F=r(V,2);c(F,()=>xt,(x,E)=>{E(x,{children:(Te,je)=>{g();var Ie=N("Your latest trading activity");t(Te,Ie)},$$slots:{default:!0}})}),d(b);var R=r(b,2);{var O=x=>{Je(x,{variant:"outline",size:"sm",onclick:()=>pt("/transactions"),children:(E,Te)=>{g();var je=N("View All");t(E,je)},$$slots:{default:!0}})};ce(R,x=>{e(S)&&x(O)})}d($),t(L,$)},$$slots:{default:!0}})});var Se=r(q,2);c(Se,()=>qe,(T,H)=>{H(T,{children:(L,ue)=>{It(L,{get columns(){return e(X)},get data(){return e(Le)},onRowClick:$=>!$.isTransfer&&pt(`/coin/${$.coin.symbol}`),emptyIcon:Nt,emptyTitle:"No transactions yet",emptyDescription:"You haven't made any trades yet. Start by buying or selling coins."})},$$slots:{default:!0}})}),t(we,te)},$$slots:{default:!0}})}),d(De),t(Oe,De)};ce(C,Oe=>{e(v)?Oe(xe):Oe(dt,!1)},ee)}};ce(s,C=>{_e()?C(M,!1):C(_)},o)}};ce(B,s=>{e(j)?s(Ve):s(Ge,!1)})}d(oe),t(nt,Q),Yt(),et()}export{ra as component};
