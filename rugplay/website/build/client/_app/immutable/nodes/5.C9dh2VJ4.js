import{l as le,i as de,c as Y,a as e,f as n,s as Q,t as V}from"../chunks/BiLdCT7w.js";import{o as ye}from"../chunks/DBnYf9wq.js";import{i as u,p as we,b as z,f as Pe,a as ke,s as r,c as $,t as se,g as a,n as E,r as v,e as s,d as Ue}from"../chunks/Dc9Cd6uL.js";import{i as oe}from"../chunks/4JrI1xkN.js";import{e as ne,i as ie}from"../chunks/DT6MbhOo.js";import{c as g}from"../chunks/DKQvO5e2.js";import{C as Ce}from"../chunks/BE8a_9Ge.js";import{C as De}from"../chunks/D0g6TdLa.js";import"../chunks/aor5dgAF.js";import{C as Be}from"../chunks/b_f0gCBc.js";import{C as je}from"../chunks/jS9pjJ83.js";import{D as Ne,R as Te}from"../chunks/BpTyYBFh.js";import{B as W}from"../chunks/PVG7Em25.js";import{I as Re}from"../chunks/5J9eaWb4.js";import{T as Se}from"../chunks/C63IjmiN.js";import"../chunks/BvtTpaCk.js";import{S as X}from"../chunks/DZFQxItp.js";import{t as F}from"../chunks/BR_bh9L_.js";import{H as Fe}from"../chunks/BLMq3BH0.js";import{I as ce,s as ve}from"../chunks/BFn_PWCM.js";import{D as Oe,a as Ie,b as ze}from"../chunks/CpfRlYS9.js";import{D as Ee}from"../chunks/CTgw-KxQ.js";function He(H,B){const k=le(B,["children","$$slots","$$events","$$legacy"]);ce(H,de({name:"ban"},()=>k,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(h,j)=>{var i=Y(),p=u(i);ve(p,B,"default",{}),e(h,i)},$$slots:{default:!0}}))}function qe(H,B){const k=le(B,["children","$$slots","$$events","$$legacy"]);ce(H,de({name:"user-check"},()=>k,{iconNode:[["path",{d:"m16 11 2 2 4-4"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}]],children:(h,j)=>{var i=Y(),p=u(i);ve(p,B,"default",{}),e(h,i)},$$slots:{default:!0}}))}var Ae=n("<!> ",1),Je=n("<!> Ban User",1),Me=n("<!> <!>",1),Le=n('<div class="flex items-center justify-between p-4 border rounded"><div class="space-y-2 flex-1"><!> <!> <!></div> <!></div>'),Ge=n('<div class="space-y-4"></div>'),Ke=n('<div class="text-center py-8"><p class="text-muted-foreground">No banned users found.</p></div>'),Qe=n("<!> Unban",1),Ve=n('<div class="flex items-center justify-between p-4 border rounded"><div class="space-y-1 flex-1"><div class="font-medium"> </div> <div class="text-sm text-muted-foreground"> </div> <div class="text-sm"><span class="font-medium">Reason:</span> </div></div> <!></div>'),We=n('<div class="space-y-4"></div>'),Xe=n("<!> <!>",1),Ye=n("<!> <!>",1),Ze=n("<!> <!>",1),ea=n('<!> <div class="space-y-4"><div><label for="username" class="block text-sm font-medium mb-2">Username</label> <!></div> <div><label for="reason" class="block text-sm font-medium mb-2">Reason for ban</label> <!></div></div> <!>',1),aa=n('<div class="container mx-auto max-w-4xl py-6"><!></div> <!>',1);function ka(H,B){we(B,!0);let k=z(Pe([])),q=z(!0),h=z(!1),j=z(!1),i=z(""),p=z("");async function Z(){s(q,!0);try{const l=await fetch("/api/admin/users/banned-list");l.ok&&s(k,await l.json(),!0)}catch{F.error("Failed to load banned users")}finally{s(q,!1)}}async function ue(){if(!(!a(i).trim()||!a(p).trim())){s(h,!0);try{const l=await fetch("/api/admin/users/ban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a(i).trim(),reason:a(p).trim()})});if(l.ok)F.success("User banned successfully"),await Z(),s(j,!1),s(i,""),s(p,"");else{const b=await l.json();F.error(b.message||"Failed to ban user")}}catch{F.error("Failed to ban user")}finally{s(h,!1)}}}async function me(l){s(h,!0);try{const b=await fetch("/api/admin/users/unban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l})});if(b.ok)F.success("User unbanned successfully"),await Z();else{const N=await b.json();F.error(N.message||"Failed to unban user")}}catch{F.error("Failed to unban user")}finally{s(h,!1)}}function fe(){s(i,""),s(p,""),s(j,!0)}ye(()=>{Z()});var re=aa(),ee=u(re),pe=$(ee);g(pe,()=>Ce,(l,b)=>{b(l,{children:(N,$e)=>{var A=Xe(),L=u(A);g(L,()=>Be,(J,M)=>{M(J,{class:"flex flex-row items-center justify-between",children:(G,K)=>{var U=Me(),C=u(U);g(C,()=>je,(R,m)=>{m(R,{class:"flex items-center gap-2",children:(f,D)=>{var d=Ae(),t=u(d);Fe(t,{class:"h-5 w-5"});var o=r(t);se(()=>Q(o,` Banned Users (${a(k).length??""})`)),e(f,d)},$$slots:{default:!0}})});var T=r(C,2);W(T,{onclick:fe,children:(R,m)=>{var f=Je(),D=u(f);He(D,{class:"h-4 w-4"}),E(),e(R,f)},$$slots:{default:!0}}),e(G,U)},$$slots:{default:!0}})});var ae=r(L,2);g(ae,()=>De,(J,M)=>{M(J,{children:(G,K)=>{var U=Y(),C=u(U);{var T=m=>{var f=Ge();ne(f,20,()=>Array(5),ie,(D,d)=>{var t=Le(),o=$(t),O=$(o);X(O,{class:"h-4 w-48"});var c=r(O,2);X(c,{class:"h-3 w-32"});var _=r(c,2);X(_,{class:"h-3 w-64"}),v(o);var x=r(o,2);X(x,{class:"h-8 w-16"}),v(t),e(D,t)}),v(f),e(m,f)},R=(m,f)=>{{var D=t=>{var o=Ke();e(t,o)},d=t=>{var o=We();ne(o,21,()=>a(k),ie,(O,c)=>{var _=Ve(),x=$(_),y=$(x),w=$(y,!0);v(y);var P=r(y,2),S=$(P);v(P);var I=r(P,2),he=r($(I));v(I),v(x);var ge=r(x,2);W(ge,{size:"sm",variant:"outline",onclick:()=>me(a(c).id),get disabled(){return a(h)},children:(be,ra)=>{var te=Qe(),xe=u(te);qe(xe,{class:"h-4 w-4"}),E(),e(be,te)},$$slots:{default:!0}}),v(_),se(()=>{Q(w,a(c).name),Q(S,`@${a(c).username??""}`),Q(he,` ${a(c).banReason??""}`)}),e(O,_)}),v(o),e(t,o)};oe(m,t=>{a(k).length===0?t(D):t(d,!1)},f)}};oe(C,m=>{a(q)?m(T):m(R,!1)})}e(G,U)},$$slots:{default:!0}})}),e(N,A)},$$slots:{default:!0}})}),v(ee);var _e=r(ee,2);g(_e,()=>Te,(l,b)=>{b(l,{get open(){return a(j)},set open(N){s(j,N,!0)},children:(N,$e)=>{var A=Y(),L=u(A);g(L,()=>Ne,(ae,J)=>{J(ae,{children:(M,G)=>{var K=ea(),U=u(K);g(U,()=>Oe,(d,t)=>{t(d,{children:(o,O)=>{var c=Ye(),_=u(c);g(_,()=>Ie,(y,w)=>{w(y,{children:(P,S)=>{E();var I=V("Ban User");e(P,I)},$$slots:{default:!0}})});var x=r(_,2);g(x,()=>ze,(y,w)=>{w(y,{children:(P,S)=>{E();var I=V("Enter the username and reason to ban a user.");e(P,I)},$$slots:{default:!0}})}),e(o,c)},$$slots:{default:!0}})});var C=r(U,2),T=$(C),R=r($(T),2);Re(R,{id:"username",placeholder:"Enter username (without @)",required:!0,get value(){return a(i)},set value(d){s(i,d,!0)}}),v(T);var m=r(T,2),f=r($(m),2);Se(f,{id:"reason",placeholder:"Enter the reason for banning this user...",required:!0,get value(){return a(p)},set value(d){s(p,d,!0)}}),v(m),v(C);var D=r(C,2);g(D,()=>Ee,(d,t)=>{t(d,{children:(o,O)=>{var c=Ze(),_=u(c);W(_,{variant:"outline",onclick:()=>s(j,!1),children:(w,P)=>{E();var S=V("Cancel");e(w,S)},$$slots:{default:!0}});var x=r(_,2);const y=Ue(()=>!a(i).trim()||!a(p).trim()||a(h));W(x,{variant:"destructive",onclick:ue,get disabled(){return a(y)},children:(w,P)=>{E();var S=V("Ban User");e(w,S)},$$slots:{default:!0}}),e(o,c)},$$slots:{default:!0}})}),e(M,K)},$$slots:{default:!0}})}),e(N,A)},$$slots:{default:!0}})}),e(H,re),ke()}export{ka as component};
