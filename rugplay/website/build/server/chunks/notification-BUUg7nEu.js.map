{"version":3,"file":"notification-BUUg7nEu.js","sources":["../../../.svelte-kit/adapter-node/chunks/notification.js"],"sourcesContent":["import { d as db, n as notifications } from \"./index4.js\";\nimport { c as client } from \"./redis.js\";\nasync function createNotification(userId, type, title, message, link) {\n  await db.insert(notifications).values({\n    userId: parseInt(userId),\n    type,\n    title,\n    message,\n    link\n  });\n  try {\n    const channel = `notifications:${userId}`;\n    const payload = {\n      type: \"notification\",\n      timestamp: (/* @__PURE__ */ new Date()).toISOString(),\n      userId,\n      notificationType: type,\n      title,\n      message,\n      link\n    };\n    await client.publish(channel, JSON.stringify(payload));\n  } catch (error) {\n    console.error(\"Failed to send notification via Redis:\", error);\n  }\n}\nexport {\n  createNotification as c\n};\n"],"names":[],"mappings":";;;AAEA,eAAe,kBAAkB,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE;AACtE,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC;AACxC,IAAI,MAAM,EAAE,QAAQ,CAAC,MAAM,CAAC;AAC5B,IAAI,IAAI;AACR,IAAI,KAAK;AACT,IAAI,OAAO;AACX,IAAI;AACJ,GAAG,CAAC;AACJ,EAAE,IAAI;AACN,IAAI,MAAM,OAAO,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;AAC7C,IAAI,MAAM,OAAO,GAAG;AACpB,MAAM,IAAI,EAAE,cAAc;AAC1B,MAAM,SAAS,EAAE,iBAAiB,IAAI,IAAI,EAAE,EAAE,WAAW,EAAE;AAC3D,MAAM,MAAM;AACZ,MAAM,gBAAgB,EAAE,IAAI;AAC5B,MAAM,KAAK;AACX,MAAM,OAAO;AACb,MAAM;AACN,KAAK;AACL,IAAI,MAAM,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAC1D,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,wCAAwC,EAAE,KAAK,CAAC;AAClE;AACA;;;;"}